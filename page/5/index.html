<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>第 5 页 | 博客</title>

  
  <meta name="author" content="403 Forbidden">
  

  

  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  

  <meta property="og:site_name" content="博客"/>

  
  <meta property="og:image" content="/favicon.ico"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="博客" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
</head>


<body>
<div class="blog">
  <div class="content">

    <header>
  <div class="site-branding">
    <h1 class="site-title">
      <a href="/">博客</a>
    </h1>
    <p class="site-description"></p>
  </div>
  <nav class="site-navigation">
    <ul>
      
        <li><a href="/">主页</a></li>
      
        <li><a href="/categories">分类</a></li>
      
        <li><a href="/about.html">关于</a></li>
      
    </ul>
  </nav>
</header>

    <main class="site-main posts-loop">
    
  <article>

  
    
    <h3 class="article-title"><a href="/2016/03/03/使用 aria2 搭建自己的离线下载服务器/"><span>使用 aria2 搭建自己的离线下载服务器</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2016/03/03/使用 aria2 搭建自己的离线下载服务器/" rel="bookmark">
        <time class="entry-date published" datetime="2016-03-03T06:09:08.000Z">
          2016-03-03
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p>先上两个项目的最新版下载地址：</p>
<ul>
<li><a href="http://binux.github.io/yaaw/" target="_blank" rel="noopener">http://binux.github.io/yaaw/</a></li>
</ul>
<ul>
<li><a href="https://github.com/aria2/aria2/releases/latest" target="_blank" rel="noopener">https://github.com/aria2/aria2/releases/latest</a></li>
</ul>
<p>完整操作：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">wget "https://github.com/aria2/aria2/releases/download/release-1.31.0/aria2-1.31.0.tar.gz" -O aria2-1.31.0.tar.gz</span><br><span class="line">tar zxvf aria2-1.31.0.tar.gz</span><br><span class="line">cd aria2-1.31.0</span><br><span class="line">./configure</span><br><span class="line">make &amp;&amp; make install</span><br><span class="line">vi /root/aria2.conf</span><br></pre></td></tr></table></figure></p>
<p>/root/aria2.conf 内容（更多配置项见 <a href="http://futa.ooo/2726.html">aria2配置示例</a>）：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#设置下载目录</span><br><span class="line">dir=/home/wwwroot/***/downloads </span><br><span class="line">disable-ipv6=true</span><br><span class="line">enable-rpc=true</span><br><span class="line">rpc-allow-origin-all=true</span><br><span class="line">rpc-listen-all=true</span><br><span class="line">#设置下载端口</span><br><span class="line">rpc-listen-port=2333</span><br><span class="line">#设置密码</span><br><span class="line">rpc-secret=qwertyuiop1</span><br><span class="line">continue=true</span><br><span class="line">input-file=/root/aria2.session</span><br><span class="line">save-session=/root/aria2.session</span><br><span class="line">save-session-interval=60</span><br><span class="line">max-concurrent-downloads=3</span><br></pre></td></tr></table></figure></p>
<p>添加自启动：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo '/usr/local/bin/aria2c --conf-path=/root/aria2.conf' &gt;&gt; /etc/init.d/rc.local</span><br></pre></td></tr></table></figure></p>
<p>然后布置 web 端（基于 lnmp 1.2）：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">lnmp vhost add</span><br><span class="line">cd /home/wwwroot/***  #设置下载目录</span><br><span class="line">wget https://github.com/binux/yaaw/zipball/master</span><br><span class="line">unzip master</span><br><span class="line">mv binux-yaaw-8c8d226/* .</span><br><span class="line">rm -rf binux-yaaw-8c8d226/ master</span><br><span class="line">mkdir downloads</span><br><span class="line">chown -R www .</span><br><span class="line">chmod -R 755 .</span><br><span class="line">chmod -R 777 downloads</span><br><span class="line">reboot</span><br></pre></td></tr></table></figure></p>
<p>之后打开你配置的域名，设置 JSON-RPC Path 为 <code>http://token:你的密码@域名:端口/jsonrpc</code> 即可</p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/VPS-技术/">VPS 技术</a>
    </span>
    

    

    </div>

    
    <div class="article-meta pull-right">
      <span>
        <i class="icon-comments"></i>
        <span>
          <a href="/2016/03/03/使用 aria2 搭建自己的离线下载服务器/#comment">评论</a>
        </span>
      </span>
    </div>
    
  </div>
</article>



  <article>

  
    
    <h3 class="article-title"><a href="/2016/03/01/jquery事件重复绑定解决办法/"><span>jquery事件重复绑定解决办法</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2016/03/01/jquery事件重复绑定解决办法/" rel="bookmark">
        <time class="entry-date published" datetime="2016-03-01T07:09:43.000Z">
          2016-03-01
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <ol>
<li><p>$.fn.live 重复绑定<br>解决：使用die()方法，在live()方法绑定前，将此元素上的前面被绑定的事件统统解除，然后再通过live()方法绑定新的事件。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//先通过die()方法解除，再通过live()绑定</span></span><br><span class="line">$(“#selectAll”).die().live(“click”,function()&#123;</span><br><span class="line"><span class="comment">//事件运行代码</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>click等事件<br>解决:使用unbind(“click”)方法先解除绑定的事件再绑定新事件,即在给对象绑定事件之前先移除该对象上的原有事件<br>完整测试代码:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"box"</span>&gt;</span><br><span class="line">    &lt;button id=<span class="string">"test"</span>&gt;重复绑定触发按钮&lt;<span class="regexp">/button&gt;(点击此按钮两次及以上,即可触发重复绑定,再点击下面的按钮就可看到结果)</span></span><br><span class="line"><span class="regexp">    &lt;br/</span>&gt;<span class="xml"><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span></span><br><span class="line">    &lt;button id=<span class="string">"test1"</span>&gt;click重复绑定测试按钮&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">    &lt;button id="test2"&gt;click绑定一次测试按钮&lt;/</span>button&gt;</span><br><span class="line">    &lt;button id=<span class="string">"test3"</span>&gt;live重复绑定测试按钮&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">    &lt;button id="test4"&gt;live绑定一次测试按钮&lt;/</span>button&gt;</span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;script type="text/</span>javascript<span class="string">" src="</span>../<span class="keyword">static</span>/jquery<span class="number">-1.6</span><span class="number">.1</span>.min.js<span class="string">"&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string">&lt;script type="</span>text/javascript<span class="string">"&gt;</span></span><br><span class="line"><span class="string">    $(function()&#123;</span></span><br><span class="line"><span class="string">        var i = 1,j=1,k=1,h=1,n=1;</span></span><br><span class="line"><span class="string">        var triggerBind = function()&#123;</span></span><br><span class="line">            $("#test1").click(function() &#123;</span><br><span class="line">                alert(<span class="string">"click未解除绑定重复绑定执行第"</span> + j++ + <span class="string">"次"</span>);</span><br><span class="line">            &#125;);</span><br><span class="line">            $(<span class="string">"#test2"</span>).unbind(<span class="string">'click'</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                alert(<span class="string">"click解除绑定执行"</span> + k++ + <span class="string">"次"</span>);</span><br><span class="line">            &#125;);</span><br><span class="line">            </span><br><span class="line">            $(<span class="string">"#test3"</span>).live(<span class="string">"click"</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                alert(<span class="string">"live未解除绑定重复执行第"</span> + h++ + <span class="string">"次"</span>);</span><br><span class="line">            &#125;);</span><br><span class="line">            $(<span class="string">"#test4"</span>).die().live(<span class="string">"click"</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                alert(<span class="string">"live解除绑定后执行"</span> + n++ + <span class="string">"次"</span>);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;                </span><br><span class="line">        $(<span class="string">"#test"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            triggerBind();</span><br><span class="line">            alert(<span class="string">"触发绑定点击第"</span> + i++ + <span class="string">"次"</span>);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>转载自 <a href="http://www.cnblogs.com/heiniuhaha/archive/2011/08/07/jquery-event-repeat-bind.html" target="_blank" rel="noopener">http://www.cnblogs.com/heiniuhaha/archive/2011/08/07/jquery-event-repeat-bind.html</a></p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/Web-开发/">Web 开发</a>
    </span>
    

    

    </div>

    
    <div class="article-meta pull-right">
      <span>
        <i class="icon-comments"></i>
        <span>
          <a href="/2016/03/01/jquery事件重复绑定解决办法/#comment">评论</a>
        </span>
      </span>
    </div>
    
  </div>
</article>



  <article>

  
    
    <h3 class="article-title"><a href="/2016/02/28/MySQL中函数CONCAT及GROUP_CONCAT/"><span>MySQL中函数CONCAT及GROUP_CONCAT</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2016/02/28/MySQL中函数CONCAT及GROUP_CONCAT/" rel="bookmark">
        <time class="entry-date published" datetime="2016-02-27T23:57:06.000Z">
          2016-02-28
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p>一、CONCAT（）函数<br>CONCAT（）函数用于将多个字符串连接成一个字符串。<br>使用数据表Info作为示例，其中SELECT id,name FROM info LIMIT 1;的返回结果为<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+----+--------+</span><br><span class="line">| id | name   |</span><br><span class="line">+----+--------+</span><br><span class="line">|  1 | BioCyc |</span><br><span class="line">+----+--------+</span><br></pre></td></tr></table></figure></p>
<p>1、语法及使用特点：<br><code>CONCAT(str1,str2,…)</code><br>返回结果为连接参数产生的字符串。如有任何一个参数为NULL ，则返回值为 NULL。可以有一个或多个参数。</p>
<p>2、使用示例：<br><code>SELECT CONCAT(id, ‘，’, name) AS con FROM info LIMIT 1;</code> 返回结果为<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+----------+</span><br><span class="line">| con      |</span><br><span class="line">+----------+</span><br><span class="line">| 1,BioCyc |</span><br><span class="line">+----------+</span><br></pre></td></tr></table></figure></p>
<p><code>SELECT CONCAT(‘My’, NULL, ‘QL’);</code> 返回结果为<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+--------------------------+</span><br><span class="line">| CONCAT(&apos;My&apos;, NULL, &apos;QL&apos;) |</span><br><span class="line">+--------------------------+</span><br><span class="line">| NULL                     |</span><br><span class="line">+--------------------------+</span><br></pre></td></tr></table></figure></p>
<p>3、如何指定参数之间的分隔符<br>使用函数CONCAT_WS（）。使用语法为：<code>CONCAT_WS(separator,str1,str2,…)</code><br>CONCAT_WS() 代表 CONCAT With Separator ，是CONCAT()的特殊形式。第一个参数是其它参数的分隔符。分隔符的位置放在要连接的两个字符串之间。分隔符可以是一个字符串，也可以是其它参数。如果分隔符为 NULL，则结果为 NULL。函数会忽略任何分隔符参数后的 NULL 值。但是CONCAT_WS()不会忽略任何空字符串。 (然而会忽略所有的 NULL）。</p>
<p>如 <code>SELECT CONCAT_WS(&#39;_&#39;,id,name) AS con_ws FROM info LIMIT 1;</code> 返回结果为<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+----------+</span><br><span class="line">| con_ws   |</span><br><span class="line">+----------+</span><br><span class="line">| 1_BioCyc |</span><br><span class="line">+----------+</span><br></pre></td></tr></table></figure></p>
<p><code>SELECT CONCAT_WS(&#39;,&#39;,&#39;First name&#39;,NULL,&#39;Last Name&#39;);</code> 返回结果为<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">+----------------------------------------------+</span><br><span class="line">| CONCAT_WS(&apos;,&apos;,&apos;First name&apos;,NULL,&apos;Last Name&apos;) |</span><br><span class="line">+----------------------------------------------+</span><br><span class="line">| First name,Last Name                         |</span><br><span class="line">+----------------------------------------------+</span><br></pre></td></tr></table></figure></p>
<p>二、GROUP_CONCAT（）函数<br>GROUP_CONCAT函数返回一个字符串结果，该结果由分组中的值连接组合而成。<br>使用表info作为示例，其中语句 <code>SELECT locus,id,journal FROM info WHERE locus IN(&#39;AB086827&#39;,&#39;AF040764&#39;);</code> 的返回结果为<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">+----------+----+--------------------------+</span><br><span class="line">| locus    | id | journal                  |</span><br><span class="line">+----------+----+--------------------------+</span><br><span class="line">| AB086827 |  1 | Unpublished              |</span><br><span class="line">| AB086827 |  2 | Submitted (20-JUN-2002)  |</span><br><span class="line">| AF040764 | 23 | Unpublished              |</span><br><span class="line">| AF040764 | 24 | Submitted (31-DEC-1997)  |</span><br><span class="line">+----------+----+--------------------------+</span><br></pre></td></tr></table></figure></p>
<p>1、使用语法及特点：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">GROUP_CONCAT([DISTINCT] expr [,expr ...]</span><br><span class="line">[ORDER BY &#123;unsigned_integer | col_name | formula&#125; [ASC | DESC] [,col ...]]</span><br><span class="line">[SEPARATOR str_val])</span><br></pre></td></tr></table></figure></p>
<p>在 MySQL 中，你可以得到表达式结合体的连结值。通过使用 DISTINCT 可以排除重复值。如果希望对结果中的值进行排序，可以使用 ORDER BY 子句。<br>SEPARATOR 是一个字符串值，它被用于插入到结果值中。缺省为一个逗号 (“,”)，可以通过指定 SEPARATOR “” 完全地移除这个分隔符。<br>可以通过变量 group_concat_max_len 设置一个最大的长度。在运行时执行的句法如下： <code>SET [SESSION | GLOBAL] group_concat_max_len = unsigned_integer;</code><br>如果最大长度被设置，结果值被剪切到这个最大长度。如果分组的字符过长，可以对系统参数进行设置：<code>SET @@global.group_concat_max_len=40000;</code></p>
<p>2、使用示例：<br>语句 <code>SELECT locus,GROUP_CONCAT(id) FROM info WHERE locus IN(&#39;AB086827&#39;,&#39;AF040764&#39;) GROUP BY locus;</code> 的返回结果为<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">+----------+------------------+</span><br><span class="line">| locus    | GROUP_CONCAT(id) |</span><br><span class="line">+----------+------------------+</span><br><span class="line">| AB086827 | 1,2              |</span><br><span class="line">| AF040764 | 23,24            |</span><br><span class="line">+----------+------------------+</span><br></pre></td></tr></table></figure></p>
<p>语句 <code>SELECT locus,GROUP_CONCAT(distinct id ORDER BY id DESC SEPARATOR &#39;_&#39;) FROM info WHERE locus IN(&#39;AB086827&#39;,&#39;AF040764&#39;) GROUP BY locus;</code>的返回结果为<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">+----------+----------------------------------------------------------+</span><br><span class="line">| locus    | GROUP_CONCAT(distinct id ORDER BY id DESC SEPARATOR &apos;_&apos;) |</span><br><span class="line">+----------+----------------------------------------------------------+</span><br><span class="line">| AB086827 | 2_1                                                      |</span><br><span class="line">| AF040764 | 24_23                                                    |</span><br><span class="line">+----------+----------------------------------------------------------+</span><br></pre></td></tr></table></figure></p>
<p>语句 <code>SELECT locus,GROUP_CONCAT(concat_ws(&#39;, &#39;,id,journal) ORDER BY id DESC SEPARATOR &#39;. &#39;) FROM info WHERE locus IN(&#39;AB086827&#39;,&#39;AF040764&#39;) GROUP BY locus;</code> 的返回结果为<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">+----------+--------------------------------------------------------------------------+</span><br><span class="line">| locus    | GROUP_CONCAT(concat_ws(&apos;, &apos;,id,journal) ORDER BY id DESC SEPARATOR &apos;. &apos;) |</span><br><span class="line">+----------+--------------------------------------------------------------------------+</span><br><span class="line">| AB086827 | 2, Submitted (20-JUN-2002). 1, Unpublished                               |</span><br><span class="line">| AF040764 | 24, Submitted (31-DEC-1997) . 23, Unpublished                            |</span><br><span class="line">+----------+--------------------------------------------------------------------------+</span><br></pre></td></tr></table></figure></p>
<p>转载自 <a href="http://www.cnblogs.com/appleat/archive/2012/09/03/2669033.html" target="_blank" rel="noopener">http://www.cnblogs.com/appleat/archive/2012/09/03/2669033.html</a></p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/Web-开发/">Web 开发</a>
    </span>
    

    

    </div>

    
    <div class="article-meta pull-right">
      <span>
        <i class="icon-comments"></i>
        <span>
          <a href="/2016/02/28/MySQL中函数CONCAT及GROUP_CONCAT/#comment">评论</a>
        </span>
      </span>
    </div>
    
  </div>
</article>



  <article>

  
    
    <h3 class="article-title"><a href="/2016/02/13/curl不使用文件存取cookie php使用curl获取cookie示例/"><span>curl不使用文件存取cookie php使用curl获取cookie示例</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2016/02/13/curl不使用文件存取cookie php使用curl获取cookie示例/" rel="bookmark">
        <time class="entry-date published" datetime="2016-02-13T07:49:45.000Z">
          2016-02-13
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">/*-----保存COOKIE-----*/</span></span><br><span class="line">$url = <span class="string">'www.xxx.com'</span>; <span class="comment">//url地址</span></span><br><span class="line">$post = <span class="string">"id=user&amp;pwd=123456"</span>; <span class="comment">//POST数据</span></span><br><span class="line">$ch = curl_init($url); <span class="comment">//初始化</span></span><br><span class="line">curl_setopt($ch,CURLOPT_HEADER,<span class="number">1</span>); <span class="comment">//将头文件的信息作为数据流输出</span></span><br><span class="line">curl_setopt($ch,CURLOPT_RETURNTRANSFER,<span class="number">1</span>); <span class="comment">//返回获取的输出文本流</span></span><br><span class="line">curl_setopt($ch,CURLOPT_POSTFIELDS,$post); <span class="comment">//发送POST数据</span></span><br><span class="line">$content = curl_exec($ch); <span class="comment">//执行curl并赋值给$content</span></span><br><span class="line">preg_match(<span class="string">'/Set-Cookie:(.*);/iU'</span>,$content,$str); <span class="comment">//正则匹配</span></span><br><span class="line">$cookie = $str[<span class="number">1</span>]; <span class="comment">//获得COOKIE（SESSIONID）</span></span><br><span class="line">curl_close($ch); <span class="comment">//关闭curl</span></span><br><span class="line"><span class="comment">/*-----使用COOKIE-----*/</span></span><br><span class="line">curl_setopt($ch,CURLOPT_COOKIE,$cookie);</span><br></pre></td></tr></table></figure>
<p>转载自 <a href="http://www.jb51.net/article/46222.htm" target="_blank" rel="noopener">http://www.jb51.net/article/46222.htm</a></p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/Web-开发/">Web 开发</a>
    </span>
    

    

    </div>

    
    <div class="article-meta pull-right">
      <span>
        <i class="icon-comments"></i>
        <span>
          <a href="/2016/02/13/curl不使用文件存取cookie php使用curl获取cookie示例/#comment">评论</a>
        </span>
      </span>
    </div>
    
  </div>
</article>



  <article>

  
    
    <h3 class="article-title"><a href="/2016/02/11/使用nsenter进入Docker容器/"><span>使用nsenter进入Docker容器</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2016/02/11/使用nsenter进入Docker容器/" rel="bookmark">
        <time class="entry-date published" datetime="2016-02-11T09:00:09.000Z">
          2016-02-11
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p>Docker容器运行后，如何进入容器进行操作呢？起初我是用SSH。如果只启动一个容器，用SSH还能应付，只需要将容器的22端口映射到本机的一个端口即可。当我启动了五个容器后，每个容器默认是没有配置SSH Server的，安装配置SSHD，映射容器SSH端口，实在是麻烦。<br>我发现很多Docker镜像都是没有安装SSHD服务的，难道有其他方法进入Docker容器？<br>浏览了Docker的文档，我没有找到答案。还是要求助于无所不能的Google，万能的Google告诉我用nsenter吧。<br>在大多数Linux发行版中，util-linux包中含有nsenter.如果没有，你需要安装它.<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cd /tmp</span><br><span class="line">curl https://www.kernel.org/pub/linux/utils/util-linux/v2.24/util-linux-2.24.tar.gz \</span><br><span class="line">  | tar -zxf-</span><br><span class="line">cd util-linux-2.24</span><br><span class="line">./configure --without-ncurses</span><br><span class="line">make nsenter</span><br><span class="line">cp nsenter /usr/local/bin</span><br></pre></td></tr></table></figure></p>
<p>使用shell脚本 docker-enter，将如下代码保存为 docker-enter, chomod +x docker-enter<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span>!/bin/sh</span><br><span class="line"></span><br><span class="line">if [ -e $(dirname "$0")/nsenter ]; then</span><br><span class="line"><span class="meta">  #</span> with boot2docker, nsenter is not in the PATH but it is in the same folder</span><br><span class="line">  NSENTER=$(dirname "$0")/nsenter</span><br><span class="line">else</span><br><span class="line">  NSENTER=nsenter</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">if [ -z "$1" ]; then</span><br><span class="line">  echo "Usage: `basename "$0"` CONTAINER [COMMAND [ARG]...]"</span><br><span class="line">  echo ""</span><br><span class="line">  echo "Enters the Docker CONTAINER and executes the specified COMMAND."</span><br><span class="line">  echo "If COMMAND is not specified, runs an interactive shell in CONTAINER."</span><br><span class="line">else</span><br><span class="line">  PID=$(docker inspect --format "&#123;&#123;.State.Pid&#125;&#125;" "$1")</span><br><span class="line">  if [ -z "$PID" ]; then</span><br><span class="line">    exit 1</span><br><span class="line">  fi</span><br><span class="line">  shift</span><br><span class="line"></span><br><span class="line">  OPTS="--target $PID --mount --uts --ipc --net --pid --"</span><br><span class="line"></span><br><span class="line">  if [ -z "$1" ]; then</span><br><span class="line">    # No command given.</span><br><span class="line">    # Use su to clear all host environment variables except for TERM,</span><br><span class="line">    # initialize the environment variables HOME, SHELL, USER, LOGNAME, PATH,</span><br><span class="line">    # and start a login shell.</span><br><span class="line">    "$NSENTER" $OPTS su - root</span><br><span class="line">  else</span><br><span class="line">    # Use env to clear all host environment variables.</span><br><span class="line">    "$NSENTER" $OPTS env --ignore-environment -- "$@"</span><br><span class="line">  fi</span><br><span class="line">fi</span><br></pre></td></tr></table></figure></p>
<p>运行 docker-enter  ，这样就进入到指定的容器中</p>
<p>关于nsenter更详细的使用方法见这里 <a href="https://github.com/jpetazzo/nsenter" target="_blank" rel="noopener">https://github.com/jpetazzo/nsenter</a></p>
<p>转载自 <a href="http://www.tuicool.com/articles/eYnUBrR" target="_blank" rel="noopener">http://www.tuicool.com/articles/eYnUBrR</a></p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/VPS-技术/">VPS 技术</a>
    </span>
    

    

    </div>

    
    <div class="article-meta pull-right">
      <span>
        <i class="icon-comments"></i>
        <span>
          <a href="/2016/02/11/使用nsenter进入Docker容器/#comment">评论</a>
        </span>
      </span>
    </div>
    
  </div>
</article>



  <article>

  
    
    <h3 class="article-title"><a href="/2016/01/11/希腊神话（人物名字）和他们的强弱排名/"><span>希腊神话（人物名字）和他们的强弱排名</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2016/01/11/希腊神话（人物名字）和他们的强弱排名/" rel="bookmark">
        <time class="entry-date published" datetime="2016-01-11T08:18:55.000Z">
          2016-01-11
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p>前段时间，蜻蜓 FM 数据造假事件闹得沸沸扬扬（<a href="http://www.zhihu.com/question/37248269" target="_blank" rel="noopener">如何评价蜻蜓 FM 伪造用户活跃度等数据？</a>），其中的命名方式颇有新意，于是找了以下这篇文章，实在想不出临时变量名的可以用这来代替：</p>
<p>在希腊神话中，一切皆从混沌(Chaos)开始。。。<br>下面是希腊神话的十二主神：</p>
<p>(1)宙斯（zeus）：<br>★宙斯是克洛诺斯之子,万神之王,主管天空.希腊神话中的至高神，掌握雷电，所以又被称为雷神。在母亲蕾亚的支持下，杀了父亲克洛诺斯，成为了第三代神王。性格极为好色，常背着妻子赫拉与其他女神 和凡人私通，私生子无数。<br>★宙斯的象征物是雄鹰、橡树和山峰；他最爱的祭品是母山羊和牛角涂成金色的白色公牛。<br>★发迹史<br>宙斯出生时,正值他父亲克洛诺斯当权,母亲瑞亚害怕宙斯被其父吞掉【注：由于某些原因, 克洛诺斯不能让他的子女生存】,因此将他藏到克里特岛交给三位女仙抚养——在岛上,一只母山羊为他提供神圣的乳汁,一只雄鹰则给他带来仙酒；每当他哭叫时,瑞亚的仆人们就到摇篮边为宙斯跳舞, 并用短剑敲击铜盾掩盖他的哭声,因此克洛诺斯一直未发现这一秘密。<br>宙斯在岛上一天天茁壮成长。一天,他和母山羊玩耍时不小心推倒了她,摔断了一支美丽的羊角。仙女阿玛尔忒亚赶忙为她治伤,宙斯则拾起这只羊角,赋予它神奇的魔力,并将它赠给了这名善良的仙女。这只羊角从此被称为“丰饶之角”,因它能出产各种美味的食物。<br>宙斯成年之后,用计救出了被父亲吞下的五个兄弟姐妹,并合力推翻了克洛诺斯,最后登上王位。<br>(发帖时间:2004-7-10 21:44:49)</p>
<p>(2)天后赫拉(Hera)：<br>★赫拉是克洛诺斯之女,宙斯的姐姐和妻子；她主管婚姻和生育,是妇女的保护神；赫拉气质高雅, 容颜美丽,且对伴侣忠贞不渝,无愧于天后的地位,但她的善妒亦闻名于世,因此,赫拉和宙斯经常发生激烈争吵,不过,通常宙斯的花言巧语又总能让他们和好如初.<br>★赫拉的象征是孔雀,因为这种有着五彩缤纷羽毛、体现着满心星斗的鸟是美丽壮观的夜空的象征,而天空正是天后赫拉光彩照人的脸庞。</p>
<p>(3)海神波塞冬(Poseidon)：<br>★ 海之皇，宙斯的二哥，手持巨大三叉戟，统领海中所有生物。有被描写为半人半鱼的模样，能呼风唤雨。性格凶暴残忍。<br>★ 马和牛是他的圣物.</p>
<p>(4)冥王哈帝斯（hades）：<br>★宙斯，波塞冬，得墨忒尔的兄长，主管冥界，力量很强，但性格平和。除了抢夺丰收女神得墨忒尔之女春之女神玻尔塞富涅为妻外，无它恶行。<br>★最喜爱黑色，最爱的祭品是全身裹着黑纱的黑母羊或黑公牛。<br>★冥府简介<br>人们死后，由引导之神赫尔墨斯将他们接到冥界。在这里，汹涌奔流着一条黑色的大河，阿刻戎河——即痛苦之河。大河阻住前进的道路，只有一个满面胡须的船夫卡隆可以将亡灵们摆渡到对岸。但是，亡灵必须交纳一定的过河费方可上船，否则将在痛苦之河的沿岸流浪，找不到归宿。<br>过河之后是一片广阔的灰色平原，这里叫做真理田园，此处连接着两条路，分别通往幸福之所——爱丽舍乐园和痛苦之所——地狱。亡灵们在真理田园前的审判台前接受冥界三大判官弥诺斯、剌达曼达斯和埃阿科斯的审判。有罪之人根据他们的罪行在地狱接受轻重不一的惩罚， 而那些无罪的人们将可以在美丽祥和的爱丽舍乐园过着衣食无忧、吟风弄月的幸福生活。<br>在爱丽舍乐园和地狱之间，建造着一座雄伟庞大的宫殿，这就是冥王哈得斯和冥后珀耳塞福涅的住所</p>
<p>(5)灶神赫斯提亚(Hestia)：<br>她是宙斯的姐姐，掌万民的家事。三位处女神明之一。在希腊神话中，并没有显著的个性。她是位贞洁处女女神。</p>
<p>(6)战神阿瑞斯(Ares)：<br>★ 战神，是凶残，狡诈，非理性的，为战争而战争的神。曾与工匠之神的妻子爱与美之神阿佛洛狄忒私通，被装进一张工匠之神特制的大网中而无法脱身。（维纳斯原为罗马神诋，后为希腊神话所吸收。）<br>★ 兀鹰是他的圣鸟,宠兽是狗狗.</p>
<p>(7)智慧女神雅典娜(Athene)：<br>★智慧女神和正义战争女神，是宙斯与女泰坦美狄斯的女儿，她是智慧女神兼和平女神(或称女战神),她勇敢、强大而又善良、仁慈,不过有时略有些小心眼,不愿别人比她强.她出生时宙斯头部剧烈疼痛，之后用大斧劈开后，雅典娜手持长枪，身披战甲从中跳出。是很受欢迎的神。因失手杀死好友帕拉斯而改名为帕拉斯·雅典娜。<br>★眼睛在夜里发亮的猫头鹰,还有公鸡和毒蛇, 对于眸子明亮的女神雅典娜来说,均为她的象征。</p>
<p>(8)神使(偷窥之神)赫耳墨斯(Hermes)：<br>★ 宙斯与阿特拉斯的女儿迈亚所生的儿子。脚生双翼，速度如飞，成为天界众神传令的使者，后为旅人，商人，盗贼的保护神，经常化为凡人下界帮助保护者.是最聪明狡猾的神.<br>★ 他动作敏捷幽雅，脚穿带翼凉鞋，头戴有翅膀的低冠帽，手握双蛇盘绕的魔仗。</p>
<p>(9)火神赫淮斯托斯(Hephaestus)：<br>宙斯和赫拉之子。长的奇丑，坡足，是美丽神界的一大败笔！可人虽长的丑，却很温柔，热爱和平，是天庭人间都很受欢迎。</p>
<p>(10)太阳神阿波罗(Apollo)：<br>★ 太阳神，宙斯和勒托之子，月神和狩猎女神阿尔忒弥斯的兄长，希腊十二大神诋之一，又名赫利俄斯。主掌光明，医药，文学，诗歌，音乐等。每天架天马拉乘的的黄金车巡游天上一周。<br>★ 月桂树是他的圣木,最喜欢的宠物是海豚和乌鸦.</p>
<p>(11)爱与美之神阿佛洛狄忒Aphrodite)：<br>★ 爱情女神，宙斯与迪俄涅的女儿。 她的甜言蜜语能骗倒所有神和人。她很爱笑，魅力无边，智者也会乱了分寸。<br>★ 桃金娘是她的圣树，鸽子是她的爱鸟。天鹅和麻雀也很受宠。</p>
<p>(12)月亮女神阿耳忒弥斯（Artemis)：<br>★ 阿尔特弥斯是阿波罗的孪生姐妹，三位处女神明之一。月神，狩猎女神，纯洁之神。所以也被称为处女的保护神。她是野生物的主人，神界的主要猎手。身为三体女神的她，在空中是西伦，地上是阿尔特弥斯，阴间和黑暗阳间是海卡蒂。<br>★丝柏是她的圣木，鹿是她最喜欢的宠兽。</p>
<p>【希腊神话中的其他神位及其职务】<br>帕尔塞福涅(Persephone) 冥后，宙斯和得墨忒尔的女儿。<br>狄俄尼索斯(Dionysus) 酒神，宙斯和塞墨勒的儿子。<br>阿尔忒尼斯(Artemis) 月亮和狩猎女神，宙斯和勒托之女。<br>赫淮斯托斯(Hephaestus) 火神，宙斯和赫拉之子。<br>赫尔墨斯(Hermes) 宙斯和迈亚的儿子，众神的使者，亡灵的接引神。<br>厄俄斯(Eos) 黎明女神<br>艾莉斯(Eris) 纷争女神<br>厄洛斯(Eros) 爱神<br>耐得斯(Naiads) 江河水泉中的女神<br>卡吕普索(Calypso) 女神<br>西摩伊斯(Simois) 河神<br>阿科洛厄斯(Achelous) 河神<br>阿克西厄斯(Axius) 派厄尼亚河神<br>格劳克斯(Glaucus) 海神，善作预言<br>特里同(Triton) 海神<br>琉科忒亚(Leucothea) 海中女神<br>涅锐伊得斯(Nereids) 海中女神<br>该亚(Gaea) 地之女神<br>塞勒涅(Selene) 月亮女神<br>塔那托斯(Thanatus) 死神<br>许普诺斯(Sleep) 睡神<br>赫卡忒(hecate) 夜和下界女神，亦是幽灵和魔法女神<br>绪任克斯(Syrinx) 山林女神<br>潘(Pan) 山林之神<br>时序三女神 欧诺尼亚（秩序）、狄克（公正）、厄瑞涅（和平）<br>命运三女神 克洛托（纺织生命之线）、拉克西斯（决定生命之线的长短）、阿特洛波斯（切断生命之线）<br>美惠三女神 欧佛洛绪涅、塔利亚、阿洛来亚<br>复仇三女神 总称为厄利尼厄斯</p>
<p>强弱排名<br>宙斯(Zeus) 天神，希腊神话中最高的神，克洛诺斯和瑞亚的儿子。<br>赫拉(Hera) 天后，克洛诺斯和瑞亚的长女，宙斯的姐姐和妻子。<br>哈迪斯(Hades) 冥王，克洛诺斯和瑞亚的儿子，宙斯的兄弟。<br>帕尔塞福涅(Persephone) 冥后，宙斯和得墨忒尔的女儿。<br>波塞冬(Poseidon) 海皇，克洛诺斯和瑞亚的儿子，宙斯的兄弟。</p>
<p>雅典娜(Athene) 智慧女神，女战神，从宙斯的头颅中诞生。<br>阿波罗(Apollo) 太阳神，宙斯和勒托之子。<br>阿瑞斯(Ares) 战神，宙斯和赫拉之子。<br>阿佛洛狄忒(Aphrodite) 爱情女神，宙斯与迪俄涅的女儿。<br>狄俄尼索斯(Dionysus) 酒神，宙斯和塞墨勒的儿子。<br>阿尔忒尼斯(Artemis) 月亮和狩猎女神，宙斯和勒托之女。<br>赫淮斯托斯(Hephaestus) 火神，宙斯和赫拉之子。<br>赫尔墨斯(Hermes) 宙斯和迈亚的儿子，众神的使者，亡灵的接引神。</p>
<p>厄俄斯(Eos) 黎明女神<br>艾莉斯(Eris) 纷争女神<br>厄洛斯(Eros) 爱神<br>耐得斯(Naiads) 江河水泉中的女神<br>卡吕普索(Calypso) 女神<br>西摩伊斯(Simois) 河神<br>阿科洛厄斯(Achelous) 河神<br>阿克西厄斯(Axius) 派厄尼亚河神<br>格劳克斯(Glaucus) 海神，善作预言<br>特里同(Triton) 海神<br>琉科忒亚(Leucothea) 海中女神<br>涅锐伊得斯(Nereids) 海中女神<br>该亚(Gaea) 地之女神<br>塞勒涅(Selene) 月亮女神<br>塔那托斯(Thanatus) 死神<br>许普诺斯(Sleep) 睡神<br>赫卡忒(Hecaba) 夜和下界女神，亦是幽灵和魔法女神<br>绪任克斯(Syrinx) 山林女神<br>潘(Pan) 山林之神</p>
<p>时序三女神 欧诺尼亚（秩序）、狄克（公正）、厄瑞涅（和平）<br>命运三女神 克洛托（纺织生命之线）、拉克西斯（决定生命之线的长短）、阿特洛波斯（切断生命之线）<br>美惠三女神 欧佛洛绪涅、塔利亚、阿洛来亚<br>复仇三女神 总称为厄利尼厄斯</p>
<p>转载自 <a href="http://blog.sina.com.cn/s/blog_490d277f01000407.html" target="_blank" rel="noopener">http://blog.sina.com.cn/s/blog_490d277f01000407.html</a></p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/杂七杂八/">杂七杂八</a>
    </span>
    

    

    </div>

    
    <div class="article-meta pull-right">
      <span>
        <i class="icon-comments"></i>
        <span>
          <a href="/2016/01/11/希腊神话（人物名字）和他们的强弱排名/#comment">评论</a>
        </span>
      </span>
    </div>
    
  </div>
</article>



  <article>

  
    
    <h3 class="article-title"><a href="/2015/12/29/识别真假搜索引擎（搜索蜘蛛）方法（baidu,google,Msn,sogou,soso等)/"><span>识别真假搜索引擎（搜索蜘蛛）方法（baidu,google,Msn,sogou,soso等)</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2015/12/29/识别真假搜索引擎（搜索蜘蛛）方法（baidu,google,Msn,sogou,soso等)/" rel="bookmark">
        <time class="entry-date published" datetime="2015-12-28T17:12:50.000Z">
          2015-12-29
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p>最近工作中遇到个问题，就是有一些资源，不希望别人很派发的抓取，这样会占用我们带宽还有资源。因此，我们对页面访问做了频率限制。这样一来，又怕搜索蜘蛛给限制了。 因此，我们有个需求，就是除了常见搜索蜘蛛，其它都要做频率限制。 工作就变成了，首先我们怎么样正确表示搜索蜘蛛。</p>
<p><strong>怎么样识别搜索蜘蛛</strong><br>搜索引擎基本上由最先google,和国内的baidu统一了。刚开始比较混乱，后期有很多规则协议，可以遵循。基本上一些新兴的搜索引擎在访问站点时候，都会延用google制定的一些规则。它们一般都会有特定的user-agent，但是，如果我们只通过user-agent去识别搜索蜘蛛的话，那样第三方抓取程序，都会去伪造个user-agent。变成搜索蜘蛛的，如：Googlebot/2.1 (+<a href="http://www.googlebot.com/bot.html" target="_blank" rel="noopener">http://www.googlebot.com/bot.html) </a>%C2%A0)是，google蜘蛛的值。</p>
<p>现在一般搜索引擎都提供一个DNS 反向IP查询功能，只需要把访问来的IP 通过反向查询域名，看是不是搜索引擎域名。这样伪造的爬虫工具，就会被很容易识别了。 具体识别真假蜘蛛只需要：<em>1，判断user-agent是否满足蜘蛛格式 2，然后进一步确定IP 反解析域名是否属于该搜索引擎域名.</em></p>
<table>
<thead>
<tr>
<th style="text-align:center">搜索引擎</th>
<th style="text-align:center">user-agent(包含)</th>
<th style="text-align:center">是否PTR</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">google</td>
<td style="text-align:center">Googlebot</td>
<td style="text-align:center">√</td>
<td>host ip  得到域名：googlebot.com主域名</td>
</tr>
<tr>
<td style="text-align:center">baidu</td>
<td style="text-align:center">Baiduspider</td>
<td style="text-align:center">√</td>
<td>host ip  得到域名：<em>.baidu.com 或 </em>.baidu.jp</td>
</tr>
<tr>
<td style="text-align:center">yahoo</td>
<td style="text-align:center">Yahoo!</td>
<td style="text-align:center">√</td>
<td>host ip  得到域名：inktomisearch.com主域名</td>
</tr>
<tr>
<td style="text-align:center">Sogou</td>
<td style="text-align:center">Sogou</td>
<td style="text-align:center">×</td>
<td><em>Sogou web spider/3.0(+<a href="http://www.sogou.com/docs/help/webmasters.htm#07″" target="_blank" rel="noopener">http://www.sogou.com/docs/help/webmasters.htm#07″</a>)<br></em>Sogou Push Spider/3.0(+<a href="http://www.sogou.com/docs/help/webmasters.htm#07″" target="_blank" rel="noopener">http://www.sogou.com/docs/help/webmasters.htm#07″</a>)</td>
</tr>
<tr>
<td style="text-align:center">网易</td>
<td style="text-align:center">YodaoBot</td>
<td style="text-align:center">×</td>
<td>*Mozilla/5.0 (compatible; YodaoBot/1.0; <a href="http://www.yodao.com/help/webmaster/spider/”" target="_blank" rel="noopener">http://www.yodao.com/help/webmaster/spider/”</a>; )</td>
</tr>
<tr>
<td style="text-align:center">MSN</td>
<td style="text-align:center">MSNBot</td>
<td style="text-align:center">√</td>
<td>host ip  得到域名：live.com主域名</td>
</tr>
<tr>
<td style="text-align:center">360</td>
<td style="text-align:center">360Spider</td>
<td style="text-align:center">×</td>
<td>Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN; rv:1.8.0.11)  Firefox/1.5.0.11; 360Spider</td>
</tr>
<tr>
<td style="text-align:center">soso</td>
<td style="text-align:center">Sosospider</td>
<td style="text-align:center">×</td>
<td>Sosospider+(+<a href="http://help.soso.com/webspider.htm" target="_blank" rel="noopener">http://help.soso.com/webspider.htm</a>)</td>
</tr>
<tr>
<td style="text-align:center">bing</td>
<td style="text-align:center">bingbot</td>
<td style="text-align:center">√</td>
<td>host ip  得到域名：msn.com主域名</td>
</tr>
</tbody>
</table>
<p>以上是我整理一些常用搜索引擎的user-agent特征码，以及IP反向解析情况。保证准确识别搜索引擎，我们通过IP反解析是最为准确方法。好在google,baidu,bing都有做反向解析。基本上占用了80%搜索市场了。下面，我是我检测方法。</p>
<p><strong>PHP反解析IP方法</strong><br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">check_spider</span><span class="params">($ip,$ua)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> $spider_list=<span class="keyword">array</span>(</span><br><span class="line">        <span class="string">'google'</span>=&gt;<span class="keyword">array</span>(<span class="string">'Googlebot'</span>,<span class="string">'googlebot.com'</span>),</span><br><span class="line">        <span class="string">'baidu'</span>=&gt;<span class="keyword">array</span>(<span class="string">'Baiduspider'</span>,<span class="string">'.baidu.'</span>),</span><br><span class="line">        <span class="string">'yahoo'</span>=&gt;<span class="keyword">array</span>(<span class="string">'Yahoo!'</span>,<span class="string">'inktomisearch.com'</span>),</span><br><span class="line">        <span class="string">'msn'</span>=&gt;<span class="keyword">array</span>(<span class="string">'MSNBot'</span>,<span class="string">'live.com'</span>),</span><br><span class="line">        <span class="string">'bing'</span>=&gt;<span class="keyword">array</span>(<span class="string">'bingbot'</span>,<span class="string">'msn.com'</span>)</span><br><span class="line">    );</span><br><span class="line">	</span><br><span class="line">    <span class="keyword">if</span>(!preg_match(<span class="string">'/^(\d&#123;1,3&#125;\.)&#123;3&#125;\d&#123;1,3&#125;$/'</span>,$ip)) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">empty</span>($ua)) <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">foreach</span> ($spider_list <span class="keyword">as</span> $k=&gt;$v) &#123;</span><br><span class="line">        <span class="keyword">if</span>(stripos($ua,$v[<span class="number">0</span>])!==<span class="keyword">false</span>) &#123;</span><br><span class="line">            $domain = gethostbyaddr($ip);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>($domain &amp;&amp; stripos($domain,$v[<span class="number">1</span>])!==<span class="keyword">false</span>) &#123;</span><br><span class="line">                <span class="keyword">return</span> $k;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>目前只加入几个搜索引擎检测，这些是可以做反解析查询的。不能做反解析查询的，最好做速度限制，用户会使用它们来伪造搜索引擎来抓取你的资源。欢迎大家交流，先写到这里了。</p>
<p>转载自 <a href="http://blog.chacuo.net/147.html" target="_blank" rel="noopener">http://blog.chacuo.net/147.html</a></p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/建站相关/">建站相关</a>
    </span>
    

    

    </div>

    
    <div class="article-meta pull-right">
      <span>
        <i class="icon-comments"></i>
        <span>
          <a href="/2015/12/29/识别真假搜索引擎（搜索蜘蛛）方法（baidu,google,Msn,sogou,soso等)/#comment">评论</a>
        </span>
      </span>
    </div>
    
  </div>
</article>



  <article>

  
    
    <h3 class="article-title"><a href="/2015/12/20/将 func uc_authcode 翻译成了 node 版，留备用/"><span>将 func uc_authcode 翻译成了 node 版，留备用</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2015/12/20/将 func uc_authcode 翻译成了 node 版，留备用/" rel="bookmark">
        <time class="entry-date published" datetime="2015-12-19T23:55:06.000Z">
          2015-12-20
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p>原版 PHP :<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">uc_authcode</span><span class="params">($str, $operation = <span class="string">'DECODE'</span>, $key = <span class="string">''</span>, $expiry = <span class="number">0</span>)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    $ckey_length = <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line">    $key = md5($key);</span><br><span class="line">    $keya = md5(substr($key, <span class="number">0</span>, <span class="number">16</span>));</span><br><span class="line">    $keyb = md5(substr($key, <span class="number">16</span>, <span class="number">16</span>));</span><br><span class="line">    $keyc = $ckey_length ? ($operation == <span class="string">'DECODE'</span> ? substr($str, <span class="number">0</span>, $ckey_length): substr(md5(microtime()), -$ckey_length)) : <span class="string">''</span>;</span><br><span class="line"></span><br><span class="line">    $cryptkey = $keya.md5($keya.$keyc);</span><br><span class="line">    $key_length = strlen($cryptkey);</span><br><span class="line"></span><br><span class="line">    $str = $operation == <span class="string">'DECODE'</span> ? base64_decode(substr($str, $ckey_length)) : sprintf(<span class="string">'%010d'</span>, $expiry ? $expiry + time() : <span class="number">0</span>).substr(md5($str.$keyb), <span class="number">0</span>, <span class="number">16</span>).$str;</span><br><span class="line">    $str_length = strlen($str);</span><br><span class="line"></span><br><span class="line">    $result = <span class="string">''</span>;</span><br><span class="line">    $box = range(<span class="number">0</span>, <span class="number">255</span>);</span><br><span class="line"></span><br><span class="line">    $rndkey = <span class="keyword">array</span>();</span><br><span class="line">    <span class="keyword">for</span>($i = <span class="number">0</span>; $i &lt;= <span class="number">255</span>; $i++) &#123;</span><br><span class="line">        $rndkey[$i] = ord($cryptkey[$i % $key_length]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>($j = $i = <span class="number">0</span>; $i &lt; <span class="number">256</span>; $i++) &#123;</span><br><span class="line">        $j = ($j + $box[$i] + $rndkey[$i]) % <span class="number">256</span>;</span><br><span class="line">        $tmp = $box[$i];</span><br><span class="line">        $box[$i] = $box[$j];</span><br><span class="line">        $box[$j] = $tmp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>($a = $j = $i = <span class="number">0</span>; $i &lt; $str_length; $i++) &#123;</span><br><span class="line">        $a = ($a + <span class="number">1</span>) % <span class="number">256</span>;</span><br><span class="line">        $j = ($j + $box[$a]) % <span class="number">256</span>;</span><br><span class="line">        $tmp = $box[$a];</span><br><span class="line">        $box[$a] = $box[$j];</span><br><span class="line">        $box[$j] = $tmp;</span><br><span class="line">        $result .= chr(ord($str[$i]) ^ ($box[($box[$a] + $box[$j]) % <span class="number">256</span>]));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>($operation == <span class="string">'DECODE'</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span>((substr($result, <span class="number">0</span>, <span class="number">10</span>) == <span class="number">0</span> || substr($result, <span class="number">0</span>, <span class="number">10</span>) - time() &gt; <span class="number">0</span>) &amp;&amp; substr($result, <span class="number">10</span>, <span class="number">16</span>) == substr(md5(substr($result, <span class="number">26</span>).$keyb), <span class="number">0</span>, <span class="number">16</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> substr($result, <span class="number">26</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">''</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> $keyc.str_replace(<span class="string">'='</span>, <span class="string">''</span>, base64_encode($result));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>node：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Buffer = <span class="built_in">require</span>(<span class="string">"buffer"</span>).Buffer;</span><br><span class="line"><span class="keyword">var</span> crypto = <span class="built_in">require</span>(<span class="string">"crypto"</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">String</span>.prototype.md5=<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> crypto.createHash(<span class="string">"md5"</span>).update(<span class="keyword">this</span>.toString(),<span class="string">'utf8'</span>).digest(<span class="string">"hex"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> microtime=<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> d=<span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">    <span class="keyword">return</span> (d.getMilliseconds()/<span class="number">1000</span>).toFixed(<span class="number">8</span>)+<span class="string">" "</span>+<span class="built_in">Math</span>.floor(d.getTime()/<span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> uc_authcode=<span class="function"><span class="keyword">function</span>(<span class="params">str,operation,key,expiry</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> operation=operation || <span class="string">'DECODE'</span>;</span><br><span class="line">    <span class="keyword">var</span> key=key?key.md5():<span class="string">'d41d8cd98f00b204e9800998ecf8427e'</span>;</span><br><span class="line">    <span class="keyword">var</span> expiry=expiry?expiry:<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> ckey_length=<span class="number">4</span>;</span><br><span class="line">    <span class="keyword">var</span> keya=key.substr(<span class="number">0</span>,<span class="number">16</span>).md5();</span><br><span class="line">    <span class="keyword">var</span> keyb=key.substr(<span class="number">16</span>,<span class="number">16</span>).md5();</span><br><span class="line">    <span class="keyword">var</span> keyc=ckey_length ? (operation === <span class="string">'DECODE'</span> ? str.substr(<span class="number">0</span>, ckey_length): microtime().md5().substr(-ckey_length)) : <span class="string">''</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> cryptkey=keya+(keya+keyc).md5();</span><br><span class="line">    <span class="keyword">var</span> key_length=cryptkey.length;</span><br><span class="line">    str = (operation === <span class="string">'DECODE'</span> ? <span class="keyword">new</span> Buffer(str.substr(ckey_length),<span class="string">'base64'</span>) : ((<span class="string">"000000000"</span>+( expiry ? <span class="built_in">parseInt</span>(expiry) + <span class="built_in">Math</span>.floor(<span class="keyword">new</span> <span class="built_in">Date</span>().getTime()/<span class="number">1000</span>) : <span class="number">0</span>)).substr(<span class="number">-10</span>)+(str+keyb).md5().substr(<span class="number">0</span>, <span class="number">16</span>)+str));</span><br><span class="line">    <span class="keyword">var</span> str_length=str.length;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> box=[];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">256</span>;i++) &#123;</span><br><span class="line">        box[i]=i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> rndkey=[];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt;= <span class="number">255</span>; i++) &#123;</span><br><span class="line">        rndkey[i]=cryptkey[i % key_length].charCodeAt();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> j=i=<span class="number">0</span>;i&lt;<span class="number">256</span>;i++) &#123;</span><br><span class="line">        j = (j + box[i] + rndkey[i]) % <span class="number">256</span>;</span><br><span class="line">        tmp = box[i];</span><br><span class="line">        box[i] = box[j];</span><br><span class="line">        box[j] = tmp;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> result = <span class="keyword">new</span> Buffer(str_length);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> a = j = i = <span class="number">0</span>; i &lt; str_length; i++) &#123;</span><br><span class="line">        a = (a + <span class="number">1</span>) % <span class="number">256</span>;</span><br><span class="line">        j = (j + box[a]) % <span class="number">256</span>;</span><br><span class="line">        tmp = box[a];</span><br><span class="line">        box[a] = box[j];</span><br><span class="line">        box[j] = tmp;</span><br><span class="line">        <span class="keyword">var</span> charcode = operation === <span class="string">'DECODE'</span> ? str[i] ^ (box[(box[a] + box[j]) % <span class="number">256</span>]) : str[i].charCodeAt() ^ (box[(box[a] + box[j]) % <span class="number">256</span>]);</span><br><span class="line">        result[i] = charcode;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (operation === <span class="string">'DECODE'</span>) &#123;</span><br><span class="line">        result = result.toString();</span><br><span class="line">        <span class="keyword">if</span> ((<span class="built_in">parseInt</span>(result.substr(<span class="number">0</span>, <span class="number">10</span>)) === <span class="number">0</span> || <span class="built_in">parseInt</span>(result.substr(<span class="number">0</span>, <span class="number">10</span>)) - <span class="built_in">Math</span>.floor(<span class="keyword">new</span> <span class="built_in">Date</span>().getTime()/<span class="number">1000</span>) &gt; <span class="number">0</span>) &amp;&amp; result.substr(<span class="number">10</span>, <span class="number">16</span>) == (result.substr(<span class="number">26</span>)+keyb).md5().substr(<span class="number">0</span>, <span class="number">16</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> result.substr(<span class="number">26</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">''</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (keyc+result.toString(<span class="string">"base64"</span>).replace(<span class="regexp">/=/g</span>,<span class="string">""</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(uc_authcode(<span class="string">"aaaaaa"</span>, <span class="string">'ENCODE'</span>, <span class="string">'testkey'</span>));</span><br><span class="line"><span class="built_in">console</span>.log(uc_authcode(<span class="string">"950ewo3CtcO9wrzCpsKBwrnChQbCgcOPwrJCe1Jow5LCnzJawrvCvcOzwpXDn8OqZcKFwpA8w7LCqg"</span>, <span class="string">'DECODE'</span>, <span class="string">'testkey'</span>));</span><br></pre></td></tr></table></figure></p>
<p>另附一个前端用的：<a href="/uploads/2015/12/js版uc_authcode例子.zip">js版uc_authcode例子</a>，by <a href="http://download.csdn.net/download/zhengshuiguang/8289509" target="_blank" rel="noopener">zhengshuiguang</a></p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/Web-开发/">Web 开发</a>
    </span>
    

    

    </div>

    
    <div class="article-meta pull-right">
      <span>
        <i class="icon-comments"></i>
        <span>
          <a href="/2015/12/20/将 func uc_authcode 翻译成了 node 版，留备用/#comment">评论</a>
        </span>
      </span>
    </div>
    
  </div>
</article>



  <article>

  
    
    <h3 class="article-title"><a href="/2015/12/16/mysql按照网段分类IP/"><span>mysql按照网段分类IP</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2015/12/16/mysql按照网段分类IP/" rel="bookmark">
        <time class="entry-date published" datetime="2015-12-16T06:36:18.000Z">
          2015-12-16
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p>数据库里面取出来是IP地址，需要用sql来给IP段地址分类<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">INET_NTOA</span>(<span class="keyword">CONVERT</span>(<span class="keyword">INET_ATON</span>(<span class="string">'192.168.35.11'</span>),SIGNED)&amp;<span class="number">0xFFFFFF00</span>) <span class="keyword">AS</span> tt</span><br></pre></td></tr></table></figure></p>
<p><a href="/uploads/2015/12/QQ图片20151216223458.png"><img src="/uploads/2015/12/QQ图片20151216223458.png" alt="QQ图片20151216223458"></a></p>
<p>命令解释:</p>
<ol>
<li>inet_aton(‘192.168.35.11’)这个函数是将IP地址转化为一个序列. </li>
</ol>
<ol start="2">
<li>convert是将序列类型定义成整数. </li>
</ol>
<ol start="3">
<li>&amp;0xFFFFFF00的意思是与FFFFFF00这个16进制数进行与操作.这步操作相当于掩码.可以过滤网段. </li>
</ol>
<ol start="4">
<li>inet_ntoa这个函数是将整理好的序列转化成IP地址的形式.</li>
</ol>
<p>转载自 <a href="http://blog.csdn.net/a105421548/article/details/45224843" target="_blank" rel="noopener">http://blog.csdn.net/a105421548/article/details/45224843</a></p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/Web-开发/">Web 开发</a>
    </span>
    

    

    </div>

    
    <div class="article-meta pull-right">
      <span>
        <i class="icon-comments"></i>
        <span>
          <a href="/2015/12/16/mysql按照网段分类IP/#comment">评论</a>
        </span>
      </span>
    </div>
    
  </div>
</article>



  <article>

  
    
    <h3 class="article-title"><a href="/2015/12/15/使用npm安装一些包失败了的看过来（npm国内镜像介绍）/"><span>使用npm安装一些包失败了的看过来（npm国内镜像介绍）</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2015/12/15/使用npm安装一些包失败了的看过来（npm国内镜像介绍）/" rel="bookmark">
        <time class="entry-date published" datetime="2015-12-15T08:00:29.000Z">
          2015-12-15
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p>这个也是网上搜的，亲自试过，非常好用！<br>镜像使用方法（三种办法任意一种都能解决问题，建议使用第三种，将配置写死，下次用的时候配置还在）:</p>
<p>1.通过config命令<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm config set registry https://registry.npm.taobao.org </span><br><span class="line">npm info underscore #如果上面配置正确这个命令会有字符串response</span><br></pre></td></tr></table></figure></p>
<p>2.命令行指定<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm --registry https://registry.npm.taobao.org info underscore</span><br></pre></td></tr></table></figure></p>
<p>3.编辑 ~/.npmrc 加入下面内容<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">registry = https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure></p>
<p>搜索镜像: <a href="https://npm.taobao.org" target="_blank" rel="noopener">https://npm.taobao.org</a><br>建立或使用镜像,参考: <a href="https://github.com/cnpm/cnpmjs.org" target="_blank" rel="noopener">https://github.com/cnpm/cnpmjs.org</a></p>
<p>转载自 <a href="https://cnodejs.org/topic/4f9904f9407edba21468f31e" target="_blank" rel="noopener">https://cnodejs.org/topic/4f9904f9407edba21468f31e</a></p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/Web-开发/">Web 开发</a>
    </span>
    

    

    </div>

    
    <div class="article-meta pull-right">
      <span>
        <i class="icon-comments"></i>
        <span>
          <a href="/2015/12/15/使用npm安装一些包失败了的看过来（npm国内镜像介绍）/#comment">评论</a>
        </span>
      </span>
    </div>
    
  </div>
</article>




<nav class="pagination">
  
  <a href="/page/4/" class="pagination-prev">上一页</a>
  
  
  <a href="/page/6/" class="pagination-next">下一页</a>
  
</nav>
    </main>

    <footer class="site-footer">
  <p class="site-info">
    Proudly powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and
    Theme by <a href="https://github.com/CodeDaraW/Hacker" target="_blank">Hacker</a>
    </br>
    
    &copy; 2021 403 Forbidden
    
  </p>
</footer>
    
  </div>
</div>
</body>
</html>