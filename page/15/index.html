<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>第 15 页 | 博客</title>

  
  <meta name="author" content="403 Forbidden">
  

  

  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  

  <meta property="og:site_name" content="博客"/>

  
  <meta property="og:image" content="/favicon.ico"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="博客" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
</head>


<body>
<div class="blog">
  <div class="content">

    <header>
  <div class="site-branding">
    <h1 class="site-title">
      <a href="/">博客</a>
    </h1>
    <p class="site-description"></p>
  </div>
  <nav class="site-navigation">
    <ul>
      
        <li><a href="/">主页</a></li>
      
        <li><a href="/archives">归档</a></li>
      
    </ul>
  </nav>
</header>

    <main class="site-main posts-loop">
    
  <article>

  
    
    <h3 class="article-title"><a href="/2014/02/28/不争，也有属于你的世界/"><span>不争，也有属于你的世界</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2014/02/28/不争，也有属于你的世界/" rel="bookmark">
        <time class="entry-date published" datetime="2014-02-28T08:11:42.000Z">
          2014-02-28
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p>我大二的时候找了一份在杂志发行部的实习工作，主要负责杂志征订。其实就是销售杂志，给已经到期或者快到期的客户打电话，让他们续订。争抢读者名单成了办公室的主要矛盾，作为新人，我能抢到的读者名单少，可是业绩标准却和别人一样。于是我参与到无止境的读者名单争夺“大战”，并且在这种“战斗”中精疲力尽。</p>
<p>后来跟我妈聊这事，我妈说：“当你的能力不足以支撑你的目标的时候，你要慢下来，甚至停下来学习。”在那学期选课的时候，我选修了营销学。跟营销课老师学习了之后，根据营销老师的建议，我开始在网上发我们杂志外籍顾问的文章，通过这个方法收集了大量的邮箱。我每周更新一篇电子邮件发给到这些邮箱。在外籍顾问的文章下面，写上外籍顾问文章在杂志的更新频率及杂志其他栏目。开始了不要读者名单也能轻松完成业绩标准的实习工作。</p>
<p>前一阵跟前辈们聚会，讨论的主题是“为什么现在培训班这么火，而出版业在衰落。”一位做培训的前辈说，一本书50块钱够贵的了吧！卖一万册才多少钱。一场培训，把整本书的大纲讲一讲而已，定价至少1000元吧！有2000人参加就赚的不少了。现在的人都踏实不下来读书，看书得一页页的看，培训班听一天多省事。现在大家的生活节奏越来越快，大家越来越忙，吃饭要求快餐，睡觉要求高效睡眠，上课要上速成班，很少有慢下来思考的机会，别人争什么，抢什么，我们也跟着随大流。很少有机会想，我是不是把基础的做好了，是不是应该做基础的。</p>
<p>读《五星级服务》的时候，作者很实在的指出“在没有掌握这方面的基本概念之前，学习更专业的高级课程毫无用处。同样地，你要先满足一定的前提条件才能提供卓越的、以建立客户忠诚度为目的的服务。”很多时候，我们就怕比别人差了，就怕输在起跑线上。遗憾的事，人生不是一场比赛，没有所谓的起跑线。很多人看别人创业，自己也创业，别人干的挺好的，他自己却不行。实际上行动之前，评估出自己做了多少准备，是不是把基础的东西，把前提条件做好了，才是后面是否成功的根本。罗曼·罗兰说“人们常觉得准备的阶段是在浪费时间，只有当真正的机会来临，而自己没有能力把握的时候，才能觉悟到自己平时没有准备才是浪费了时间。”</p>
<p>跟我爸一起看电影《蛋炒饭》的时候，王大卫的父亲教王大卫做菜时候说“要慢，别人越快的时候，你越要慢。”我爸特别喜欢这句话，聊天的时候几次提起。他说我做什么事都着急，都手快，他很担心我把握不住自己。其实做事三个关键“稳、准、狠”。稳排第一，准排第二。快固然重要，但是那得是你想明白了，把该下手的地方看明白了以后才能快。把事情琢磨到了火候，知道“硍节”在那儿，才能事半功倍。别着急，尤其是年轻的时候，做什么都别着急，先把自己想明白了，把自己要什么想明白了，想明白了再动。很多事情按部就班的做，不争，也有属于你的世界。而当你着急的生怕比别人慢了一步的时候，反而可能走错了方向。 </p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/鼹鼠的土豆/">鼹鼠的土豆</a>
    </span>
    

    

    </div>

    
    <div class="article-meta pull-right">
      <span>
        <i class="icon-comments"></i>
        <span>
          <a href="/2014/02/28/不争，也有属于你的世界/#comment">评论</a>
        </span>
      </span>
    </div>
    
  </div>
</article>



  <article>

  
    
    <h3 class="article-title"><a href="/2014/02/28/关于 jquery 分页的实现原理及源码/"><span>关于 jquery 分页的实现原理及源码</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2014/02/28/关于 jquery 分页的实现原理及源码/" rel="bookmark">
        <time class="entry-date published" datetime="2014-02-27T21:36:29.000Z">
          2014-02-28
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p>最近做了个用来查课本词汇表的站 <a href="http://lab.233.imjs.work/cihui/" target="_blank" rel="noopener">http://lab.233.imjs.work/cihui/</a> ，为了增强用户体验，于是用了 jquery 的 ajax 实现分页功能。随后在某个 web 技术交流群中和别人交流了下，有位童鞋认为这个功能不错，并希望我能提供下源码。正好有段时间没发自己原创的文章了，我就发在这里并摘部分的源码吧解释一下吧。现在数据库有点不完整，缺了三十几页的数据，希望各位如果有这书的童鞋能把数据库补充完整，在此先感谢一下。</p>
<p>不想看解释的直接拉到最后下载吧。</p>
<p>为了数据传输方便使用了 json，但由于默认的 json_encode 函数会将中文重新编码，为了调试方便，我写了一个函数用来将中文先用 urlencode 编码，输出之后再解码，给出递归处理准备输出的数据的 function:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">url_encode_array</span>(<span class="params">$val</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (is_array($val)) &#123; <span class="comment">//判断传入的数据是否为数组</span></span><br><span class="line">        foreach ($val <span class="keyword">as</span> $k=&gt;$v) &#123; <span class="comment">//如果是数组就循环处理获取值</span></span><br><span class="line">            $val[$k]=url_encode_array($v); <span class="comment">//调用自身继续处理</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> $val; <span class="comment">//返回编码好的数组</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> urlencode($val); <span class="comment">//如果传入值不是数组则直接返回经 urlencode 编码后的字符串</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>输出时就用<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">exit</span>(urldecode(json_encode(url_encode_array($result_array)))); <span class="comment">//先使用自定义的 url_encode 函数对传入值进行 urlencode 编码，之后用 json_encode 对值进行 json 编码，再然后用 urldecode 解码，最后用 exit 断绝之后可能的任何输出</span></span><br></pre></td></tr></table></figure></p>
<p> 输出</p>
<p>数据库部分就不讲了，和分页没什么关系。</p>
<p>现在我们已经有了查询接口了，接下来自然就要用 $.ajax 去请求数据啦，不熟悉 $.ajax 的可以去 <a href="http://w3school.com.cn/jquery/ajax_ajax.asp" target="_blank" rel="noopener">http://w3school.com.cn/jquery/ajax_ajax.asp</a> 看下，这部分就不详解了。接下来说说分页功能(./js/functions.js line 18-77):<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">success: <span class="function"><span class="keyword">function</span>(<span class="params">re</span>) </span>&#123; <span class="comment">//ajax 请求成功之后将得到的 json 对象 re 传入当前 function</span></span><br><span class="line">    <span class="keyword">if</span> (re[<span class="string">'status'</span>]==<span class="string">"error"</span>) &#123; <span class="comment">//如果返回的 status 为 error</span></span><br><span class="line">        $(<span class="string">"#search_result"</span>).html(<span class="string">'&lt;div class="alert alert-info"&gt;'</span>+re[<span class="string">'message'</span>]+<span class="string">'&lt;/div&gt;'</span>); <span class="comment">//输出返回的错误信息</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> ta=<span class="string">'&lt;table class="table table-hover"&gt;&lt;tr&gt;&lt;th&gt;#&lt;/th&gt;&lt;th&gt;单词&lt;/th&gt;&lt;th&gt;词性&lt;/th&gt;&lt;th&gt;释义&lt;/th&gt;&lt;/tr&gt;'</span>; <span class="comment">//创建 ta 变量，值为将要输出表格的表头</span></span><br><span class="line">        <span class="keyword">var</span> tmpword; <span class="comment">//创建 tmpword 变量，判断本行的单词是否与上行相同，即判断是否为一词多义</span></span><br><span class="line">        <span class="keyword">var</span> iii=<span class="number">1</span>; <span class="comment">//计数器</span></span><br><span class="line">        $.each(re[<span class="string">'result_data'</span>], <span class="function"><span class="keyword">function</span>(<span class="params">i,v</span>) </span>&#123; <span class="comment">//类似 php 的 foreach 函数，i 为键值，v 为值</span></span><br><span class="line">            <span class="keyword">if</span> (tmpword==v[<span class="string">'word'</span>]) &#123; <span class="comment">//如果是一词多义</span></span><br><span class="line">                v[<span class="string">'word'</span>]=<span class="string">'&amp;nbsp;'</span>; <span class="comment">//将输出值替换为空，但为了与部分浏览器兼容，将值改为 &amp;nbsp;</span></span><br><span class="line">                tiii=<span class="string">'&amp;nbsp;'</span>; <span class="comment">//同上</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                tmpword=v[<span class="string">'word'</span>]; <span class="comment">//如果不是一词多义，将当前单词赋值给该变量</span></span><br><span class="line">                tiii=iii; <span class="comment">//之后的表格输出序号</span></span><br><span class="line">                iii++;</span><br><span class="line">            &#125;</span><br><span class="line">            ta=ta+<span class="string">'&lt;tr&gt;&lt;td&gt;'</span>+tiii+<span class="string">'&lt;/td&gt;&lt;td&gt;'</span>+v[<span class="string">'word'</span>]+<span class="string">'&lt;/td&gt;&lt;td&gt;'</span>+v[<span class="string">'speech'</span>]+<span class="string">'&lt;/td&gt;&lt;td&gt;'</span>+v[<span class="string">'trans'</span>]+<span class="string">'&lt;/td&gt;&lt;/tr&gt;'</span>; <span class="comment">//输出的表格添加一行</span></span><br><span class="line">        &#125;);</span><br><span class="line">        ta=ta+<span class="string">'&lt;/table&gt;&lt;p style="text-align: center"&gt;'</span>; <span class="comment">//表格结尾</span></span><br><span class="line">        <span class="keyword">var</span> pgs=<span class="number">5</span>; <span class="comment">//显示页数选择的链接，要求为奇数，大于等于 3</span></span><br><span class="line">        <span class="keyword">if</span> (re[<span class="string">'max_length'</span>]&gt;pgs) &#123; <span class="comment">//如果返回的总页数大于要求显示的链接数</span></span><br><span class="line">            <span class="keyword">if</span> (page&gt;=((pgs+<span class="number">1</span>)/<span class="number">2</span>+<span class="number">1</span>)) &#123; <span class="comment">//如果当前页大于 (pgs+1)/2+1，例如当前页码为 3，pgs 为 3，将进行以下操作</span></span><br><span class="line">                <span class="keyword">if</span> (re[<span class="string">'max_length'</span>]-page&lt;((pgs<span class="number">-1</span>)/<span class="number">2</span>)) &#123; <span class="comment">//如果返回的 总页数-当前页 小于 (pgs-1)/2，则执行以下操作</span></span><br><span class="line">                    <span class="keyword">var</span> ti=re[<span class="string">'max_length'</span>]-(pgs<span class="number">-1</span>); <span class="comment">//定义循环输出初始变量</span></span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">var</span> ti=page-(pgs<span class="number">-1</span>)/<span class="number">2</span>; <span class="comment">//定义循环输出初始变量，当前页-(pgs-1)/2</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">var</span> tmpi=ti+(pgs<span class="number">-1</span>); <span class="comment">//定义循环输出结束变量</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">var</span> ti=<span class="number">1</span>;</span><br><span class="line">                <span class="keyword">var</span> tmpi=pgs;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">var</span> ti=<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">var</span> tmpi=re[<span class="string">'max_length'</span>];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (page!==<span class="number">1</span>) &#123;</span><br><span class="line">            ta=ta+<span class="string">'&lt;a href="####" id="page_'</span>+(page<span class="number">-1</span>)+<span class="string">'"&gt;上一页&lt;/a&gt;&amp;nbsp;&amp;nbsp;'</span>; <span class="comment">//如果当前页不是第一页，就输出第一页的字样</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (ti!==<span class="number">1</span>) &#123;</span><br><span class="line">            ta=ta+<span class="string">'&lt;a href="####" id="page_1"&gt;1&lt;/a&gt;&amp;nbsp;&amp;nbsp;...&amp;nbsp;&amp;nbsp;'</span>; <span class="comment">//如果循环初始值不是 1 则输出第一页链接</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i=ti;i&lt;=tmpi;i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i==page) &#123; <span class="comment">//如果循环到了当前页</span></span><br><span class="line">                ta=ta+i+<span class="string">'&amp;nbsp;&amp;nbsp;'</span>; <span class="comment">//不输出链接，直接输出页码</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                ta=ta+<span class="string">'&lt;a href="####" id="page_'</span>+i+<span class="string">'"&gt;'</span>+i+<span class="string">'&lt;/a&gt;&amp;nbsp;&amp;nbsp;'</span>; <span class="comment">//输出链接</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (tmpi!=re[<span class="string">'max_length'</span>]) &#123;</span><br><span class="line">            ta=ta+<span class="string">'...&amp;nbsp;&amp;nbsp;&lt;a href="####" id="page_'</span>+re[<span class="string">'max_length'</span>]+<span class="string">'"&gt;'</span>+re[<span class="string">'max_length'</span>]+<span class="string">'&lt;/a&gt;&amp;nbsp;&amp;nbsp;'</span>; <span class="comment">//如果循环结束的页码不等于总页码将显示最后一页的页码</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (page!=re[<span class="string">'max_length'</span>]) &#123;</span><br><span class="line">            ta=ta+<span class="string">'&lt;a href="####" id="page_'</span>+(page+<span class="number">1</span>)+<span class="string">'"&gt;下一页&lt;/a&gt;'</span>; <span class="comment">//如果当前页不是最后一页则显示下一页的链接</span></span><br><span class="line">        &#125;</span><br><span class="line">        ta=ta+<span class="string">'&lt;/p&gt;&lt;p style="text-align: right"&gt;每页显示&lt;select name="limit" id="limit"&gt;&lt;option value="10"&gt;10&lt;/option&gt;&lt;option value="20"&gt;20&lt;/option&gt;&lt;option value="50"&gt;50&lt;/option&gt;&lt;option value="100"&gt;100&lt;/option&gt;&lt;/select&gt;个&lt;/p&gt;'</span>; <span class="comment">//输出选择显示数量的 select</span></span><br><span class="line">        $(<span class="string">"#search_result"</span>).html(ta); <span class="comment">//最终的输出</span></span><br><span class="line">        $(<span class="string">"#limit"</span>).val(limit); <span class="comment">//赋值给 select，确保当前页显示数量与 select 的值相等</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>另外还有一段，为了防止用户使用 enter 提交的:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'#search_input'</span>).keypress(<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> keyCode = e.keyCode ? e.keyCode : e.which ? e.which : e.charCode;</span><br><span class="line">    <span class="keyword">if</span>(keyCode === <span class="number">13</span>)&#123;</span><br><span class="line">        submit_search($(<span class="string">"#search_input"</span>).val());</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>但 UC 浏览器上无效，只能再加一段对 get 值的判断:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">getr=GetQueryString(<span class="string">"search_input"</span>);</span><br><span class="line"><span class="keyword">if</span> (getr!==<span class="literal">null</span>) &#123;</span><br><span class="line">    $(<span class="string">"#search_input"</span>).val(getr);</span><br><span class="line">        submit_search(getr);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>如果还有别的什么问题欢迎评论本文，源码下载(需要修改 ./php/config.php): <a href="/uploads/2014/02/cihui.zip">cihui</a><br>相应的数据库下载(需要解压然后导入数据): <a href="/uploads/2014/02/vocabulary.sql_.zip">vocabulary.sql_.zip</a></p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/程序发布/">程序发布</a>
    </span>
    

    

    </div>

    
    <div class="article-meta pull-right">
      <span>
        <i class="icon-comments"></i>
        <span>
          <a href="/2014/02/28/关于 jquery 分页的实现原理及源码/#comment">评论</a>
        </span>
      </span>
    </div>
    
  </div>
</article>



  <article>

  
    
    <h3 class="article-title"><a href="/2014/02/27/关于由 BCS 收费之后带来的替代应用/"><span>关于由 BCS 收费之后带来的替代应用</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2014/02/27/关于由 BCS 收费之后带来的替代应用/" rel="bookmark">
        <time class="entry-date published" datetime="2014-02-27T05:47:42.000Z">
          2014-02-27
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p>前两日收到百度开发者中心发来的邮件，通知百度云存储开始进入收费时代。一晃眼，还以为是PCS收费，但定睛一瞧，才知道是兄弟服务BCS不能幸免。<br><a href="/uploads/2014/02/b7dad1160924ab187318c07b37fae6cd7a890ba8.jpg"><img src="/uploads/2014/02/b7dad1160924ab187318c07b37fae6cd7a890ba8.jpg" alt="b7dad1160924ab187318c07b37fae6cd7a890ba8"></a><br>曾经，百度的BAE和BCS成为开发者非常喜爱的服务，我也将数个应用搭建在BAE上。一项服务一旦开始进入收费时代，就不可能走回头路。对于曾经把自己的网站资料都存放在BCS上的朋友，怎么应对这一变化呢？我们找到了几个可以替代（部分替代）BCS的应用。</p>
<ol>
<li>七牛云存储</li>
</ol>
<p>七牛云存储为新用户免费赠送10G 的使用空间+10G/月的流量，可以说是大手笔。谈到七牛，我们不得不谈又拍，和又拍相比，七牛更加人性化，提供了更多的可自定义选项。在同等条件下，七牛更便捷。七牛还提供云镜像，配合使用<a href="http://blog.wpjam.com/project/wpjam-qiniutek/" target="_blank" rel="noopener">七牛镜像存储 WordPress 插件</a>一键实现 WordPress 博客静态文件 CDN 加速。</p>
<ol start="2">
<li>DropBox、AWS等国外云存储</li>
</ol>
<p>即使国外的服务我们使用起来显得不那么顺手，但这确实是一个不错的选择。诸如DropBox和AWS提供的云存储服务，可以方便、高效的解决网站的存储问题。</p>
<ol start="3">
<li>WP2PCS插件</li>
</ol>
<p>如果你的网站是使用WordPress搭建，不妨使用<a href="http://www.wp2pcs.com/" target="_blank" rel="noopener">WP2PCS</a>插件，它将个人网盘转换为网站的后备存储箱。WP2PCS本身不是云存储服务，但却把WordPress网站和网盘联系在一起，就像一个中间的桥梁，让你可以自由的使用网盘存储你的网站资料。WP2PCS还提供自动备份功能，即使你的网站遇到突然的灾难，也不用担心网站资料突然丢失。</p>
<p>无论你怎么选择，其实更重要的是让你的网站资料不至于受到服务商的绑架，BCS的突然收费，让很多开发者突然手足无措。不过，上述的一些途径帮我们暂时缓解了转移网站资料的时间。</p>
<p>(转载)</p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/建站相关/">建站相关</a>
    </span>
    

    

    </div>

    
    <div class="article-meta pull-right">
      <span>
        <i class="icon-comments"></i>
        <span>
          <a href="/2014/02/27/关于由 BCS 收费之后带来的替代应用/#comment">评论</a>
        </span>
      </span>
    </div>
    
  </div>
</article>



  <article>

  
    
    <h3 class="article-title"><a href="/2014/02/13/筒子们情人节快乐/"><span>筒子们情人节快乐</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2014/02/13/筒子们情人节快乐/" rel="bookmark">
        <time class="entry-date published" datetime="2014-02-13T09:24:23.000Z">
          2014-02-13
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p>额，过不了情人节的童鞋就祝你们元宵节快乐吧哈哈，我呢继续在这里扯扯淡权当过节了吧。<br>一眨眼的功夫，就迎来了正月十五，过了今天，也就算是过完了今年的春节了吧，相信大部分的童鞋在这个星期一就已经开学了，之所以说大部分，是因为我还没有，哈哈哈。好吧，这样有点不厚道，不过晚一个礼拜开学也没什么意思，前段时间还能叫几个童鞋出来玩玩，而现在呢，只能闷闷的待家里玩手机。<br>昨天四点，在情人节的来临以及一个人的无聊再加上半夜的情绪波动三重影响下，我又想到了那个不可能的人，呵呵，但我能做到的只有想办法去忘记你，可这样我自己又不舍得啊唉，哭 Q_Q。想着离你的生日也没几个月了，而且我也不知道在这几个月里我究竟会有多少变化，于是我提前在博客里写下了一篇给你的文章，也是为了将那在我脑海中兜兜转转挥之不去的记忆抽一点出来扔进博客的数据库，我怀疑我如果不这样做早晚会被自己折磨疯的啊。。。话说我这样说是不是有点像邓布利多的冥想盆咳咳 →_→<br>不知道为什么从这个学期结束开始，我的心理承受能力莫名就变差了，我会因为别人的几句话而生气好久，然后又会将自己的负面情绪影响给别人，别人再在自己的圈子里传播，最终还是一个恶性循环。嗯，其实我整个寒假都不怎么开心，结果正巧有位可怜的娃撞我枪口上了。。。以前在这里说过，详见 <a href="http://futa.ooo/1256.html">你又不是人民币</a>。<br>嗯再过几天我也要开学了，总之应该也和各位一样吧，该背的背，该默的默，该做卷子的做卷子，只是希望能用这些冲淡我的那些固执的思绪 = = 筒子们求安慰啊。。。</p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/杂七杂八/">杂七杂八</a>
    </span>
    

    

    </div>

    
    <div class="article-meta pull-right">
      <span>
        <i class="icon-comments"></i>
        <span>
          <a href="/2014/02/13/筒子们情人节快乐/#comment">评论</a>
        </span>
      </span>
    </div>
    
  </div>
</article>



  <article>

  
    
    <h3 class="article-title"><a href="/2014/02/10/规划生活/"><span>规划生活</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2014/02/10/规划生活/" rel="bookmark">
        <time class="entry-date published" datetime="2014-02-10T11:50:44.000Z">
          2014-02-10
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p>假期的时候朋友们一起聚会，A大姐说她把定投了好几年的钱赎回，加上丈夫（领证没办事）之前攒的钱，两口子买了套房子，用这些钱付了首付。大家纷纷对A大姐表示祝贺，聚会结束以后，我和大姐B同路回家。B大姐上了车就哭了，我只好带她找了个咖啡馆坐。<br>B大姐说她跟A大姐同岁，都已经32岁了。大家认识这么多年，她一直很有优越感，觉得自己比她漂亮。她一直怕自己比大姐A过的差，A大姐有的杂志，她也订阅。A大姐看的书，她也买。A大姐出去旅行，她也去。A大姐租好房子，她也租。甚至别人给她介绍男朋友，她都不见比A大姐男朋友挣的少的。没想到现在A大姐，已经有了丈夫，有了房子，而她还在飘着，孑然一身。打拼多年没有积蓄，没有房子，欠一万多信用卡，甚至在春节都不敢回家面对父母。<br>我想劝劝B大姐，B大姐却说“凭什么她有的，我没有？！”我话到嘴边没说，其实A大姐的杂志很多都是跟其他杂志置换的，不需要她自己花钱。我和A大姐给同一家杂志的书评版写稿，很多书都是出版社送的，图书馆借的，就算是自己买的，也是杂志的稿费买的。A大姐虽然一直过有品质的生活，出去旅行，租好房子，但是她也有打算，该定投的定投，该攒钱的攒钱，没有因为这些物质生活错过她自己的目标，她始终知道自己要的是什么。而伴侣这件事，更是跟别人没关系，适合自己的最好。<br>目标不明确，或者对自己想要什么不明确的人，很容易受外界影响，会和别人攀比。攀比很可怕，它会让人失去自己方向，被动的跟随别人的脚步。当出现力不能及的情况，就容易迷茫,失措。就会觉得生活不幸福，有很负面的情绪出现。我想了好几天，想写一下这件事，一直没有想好，早上看梁晓声的新书看到书里有这样一段话“不幸福的人生感觉人人都会常有，是生存竞争压力对人的心理造成的负面感觉，不同的人面临不同的生存竞争压力。但有时候，也与我们对人生的思想方法有关。如果能提前对人生多几种考虑、打算、选择，也许人生的回旋余地会大一些，压力会小一些，瞻望前途，会相对的乐观一些；那么，不幸福的感觉，自然会相对少一些·····”<br>谈到规划生活，设立目标，很多人觉得一旦设立了目标，努力了又达不到，会很失望，会受打击。其实只要实实在在，踏踏实实的做了，那些前面的准备，努力，都不会白费。等回过头，你会发现其实这些过程也是你的收获，达到目标与否不是那么重要。而一旦你没有目标，得过且过，失去了自己的方向，不幸福的感觉会被无限放大。我们在年轻的时候早点思考一下自己的未来，打算一下，让自己压力小一点或许会过的轻松一点儿。</p>
<p>注: 转载</p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/鼹鼠的土豆/">鼹鼠的土豆</a>
    </span>
    

    

    </div>

    
    <div class="article-meta pull-right">
      <span>
        <i class="icon-comments"></i>
        <span>
          <a href="/2014/02/10/规划生活/#comment">评论</a>
        </span>
      </span>
    </div>
    
  </div>
</article>



  <article>

  
    
    <h3 class="article-title"><a href="/2014/01/31/我们都会死很久，别活太着急/"><span>我们都会死很久，别活太着急</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2014/01/31/我们都会死很久，别活太着急/" rel="bookmark">
        <time class="entry-date published" datetime="2014-01-31T11:43:47.000Z">
          2014-01-31
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p>有些人，总是活得很累，并非生活过于艰难，而是太容易被周围的环境所感染，被别人的情绪所影响。其实我们都是活给自己的，很少有人真的在意你，把你放在心上。很多时候，我们会不自觉的随大流，然后把自己弄的很忙、很累，然后我们自己很感动。觉得我付出这么多，却得到这么少，甚至什么都没得到，太不公平了。<br>前几天领导接了一电话，他高中同学，卖了奥运前拆迁的三套房子，全职在家炒股票，6年了，无论感冒发烧，刮风下雨，孩子生病，老婆离婚他都义无反顾的准时坐在电脑前面看大盘。可是这么多年了，他在股市上没有一分钱的收获，反而赔了40多万。领导安慰着他，问他对股票有什么心得！结果没听一会儿，领导就把电话挂了。我问领导“怎么了？”领导说“这就不是明白人，投资这个事，就好比种土豆（领导老家盛产土豆），你给土豆地施肥浇水、除虫锄草是为了让土豆长好，有好收成。你住的土豆地里，结果你什么都不干，连野猪来糟践土豆你都不管（他持有了一大堆连年亏损，且技术上下降趋势明显的股票），你还埋怨老天爷对你不公平，你都住土豆地里了，也不给你好收成。这太可笑了。”<br>是不是觉得似曾相识，无独有偶，很多姑娘跟我抱怨他们遇人不淑的时候，也是这个逻辑，她付出多少，牺牲多少，奉献多少，可是老天爷却给她一个“渣男”。让她伤心流泪，让她饱受伤害，让她生不如死。可是她们却忽视了，相伴终生这件事，重点是人，你得先把人找对了，再说付出、牺牲、奉献的事。<br>我的朋友A，两口子结婚，房子、家具、家电、酒席花光了所有积蓄，除了六个月的生活费，两个人什么都没有了。新婚三个月以后A算账，这三个月存了多少钱，花了多少钱，选了什么品种的理财，收益了多少，然后得出结论，三个月两个攒了四万多块钱。A老公听完了，看着A笑着说，没事，下周发了项目奖金就有五万多了，再下周发了工资就有六万多了。这就是好男人，他不会依靠你去解决问题，他会和你一起去解决问题，为你们的未来负责，踏踏实实跟你过日子。那些还没怎么着，先要求你付出这个，付出那个，让你帮他解决问题的男人，不能说对你没真心，至少证明他还没学会承担责任。<br>在众多的读书友邻里，我喜欢和Sofia聊天，我们是截然不同的女人，她会好几国语言，我除了北京话，方言都听着困难。她很温柔，对什么事都不生气，我情绪化。她年纪比我大，孩子大，而我的家庭生活刚刚开始没几年。我习惯每天做很多事，她倡导精简生活。可是我们很聊得来，我们在读书上有很大的相同之处，我们都习惯梳理框架，抓住重点阅读，把值得学习的地方都记下来。这让我们有最大的共同点，我们俩读书都很快，当所有人质疑我们俩读书为什么这么快，怎么写出书评的时候，只有我们俩能够理解对方，知道总结能给阅读带来多大的好处。<br>总结不光给阅读带来好处，也给写作带来好处。我们部门有个同事，他负责的栏目是行业，总是抱怨公司平台制约他，让他不能专心研究一个行业，耽误了他的青春，限制了他的发展。很多次他抱怨的时候，我都想说话，后来想想我大着肚子，别惹闲事儿，况且我说了他也听不懂。其实只要他踏实一下，总结一下之前写这个栏目同事的文章就能找到把这个栏目写好又提高自己的方法。之前写那个栏目的同事，跟他面对的资源，环境都一样，人家却可以用一周时间分五期，把一个行业写的透透的。让其他研究所的行业研究员托其他同事说“抽空我做东，你能不能把你们写**的研究员叫上，给我引见一下。”<br>做事情之前不妨好好的想想，把事情琢磨明白了再行动。行动之前的思考怎么才能达到目标，怎么才能把事做成了，这些都是行动之前重要的准备。抓住重点、梳理出框架、总结好行动的步骤。其实只要你自己梳理明白了，找到方向，就能把自己想做的事做成了。之所以说选择大于努力，很大程度上，是方向对了，才能到达目标；方向不对，你走的时间越长，离目标越远。我们都会死很久，别活太着急，停下来好好想想再干活，瞎忙只是感动了自己。不要急于攀附，所有的攀附都不能代表你自己的价值，你的价值在于做了什么，怎么做。 </p>
<p>博主评:<br>挺喜欢开头的那一段话的，”其实我们都是活给自己的，很少有人真的在意你，把你放在心上”，如果太在乎不必在乎的人了，自己会很累，最终”被别人的情绪所影响”。就像原文的评论里有一条，”<br>Sofia 2014-01-29 10:01:56<br>你想想，你现在怀着孕，要是被他们气到了，你多亏啊，还便宜了他们得了乐子。不理就最好。姐写了，你爱看就看，不爱看，右上角有X。<br>“哈哈，干嘛要去管某些人怎么想呢。<br>话说我熬夜熬多了。。貌似睡不着了。。晚安亲们。</p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/鼹鼠的土豆/">鼹鼠的土豆</a>
    </span>
    

    

    </div>

    
    <div class="article-meta pull-right">
      <span>
        <i class="icon-comments"></i>
        <span>
          <a href="/2014/01/31/我们都会死很久，别活太着急/#comment">评论</a>
        </span>
      </span>
    </div>
    
  </div>
</article>



  <article>

  
    
    <h3 class="article-title"><a href="/2014/01/29/关于 jquery 里 on 的用法/"><span>关于 jquery 里 on 的用法</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2014/01/29/关于 jquery 里 on 的用法/" rel="bookmark">
        <time class="entry-date published" datetime="2014-01-29T07:59:07.000Z">
          2014-01-29
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p>突发奇想想给前一篇文章里说的那个播放器加个换一首的功能，结果发现了个很奇怪的问题。因为换一首的链接我是用在页面被加载的时候用 jquery 动态加载到小工具栏里的，所以直接导致了无法绑定我指定的 function，也就是单击链接以后没办法刷新获取下一首音乐。后来百度了下，发现需要使用 .live 事件来绑定。坑爹的是用了 .live 以后前台播放器直接罢工了，之后查了下在 jquery 1.9 里已经删除了 .live 事件，好吧，删除就删除了吧，又百度了一会，发现别人说道可以用 .on 事件替代 .live。可是，保存以后发现，点链接依旧无响应。问题是我找了好多的资料发现都是说可以用 .on 代替。。。之后换了个关键字，仔细看了下别人贴上来的源码，才发现 .on 不是这样用的。在看他的源码之前，我一直以为 .on 和 .live 一样只需要两个参数，即 $(被绑定元素).on(事件, function); 就可以搞定了，但是，现在根据我的理解发现，应该是 $(被绑定元素的父级元素).on(事件, 被绑定元素, function)。。。悲催。。。在这里记一笔以免以后忘记 = =</p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/Web-开发/">Web 开发</a>
    </span>
    

    

    </div>

    
    <div class="article-meta pull-right">
      <span>
        <i class="icon-comments"></i>
        <span>
          <a href="/2014/01/29/关于 jquery 里 on 的用法/#comment">评论</a>
        </span>
      </span>
    </div>
    
  </div>
</article>



  <article>

  
    
    <h3 class="article-title"><a href="/2014/01/29/无聊给博客加了个背景音乐/"><span>无聊给博客加了个背景音乐</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2014/01/29/无聊给博客加了个背景音乐/" rel="bookmark">
        <time class="entry-date published" datetime="2014-01-29T03:08:17.000Z">
          2014-01-29
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p>如题。。顺手写了个管理中心。。这是我第一个用到 json 的玩意儿。。不过别说 json 还是挺方便的。。附源码及安装说明。。</p>
<p><strong>2014-01-31 重要更新，因在编写前一个版本时不熟悉 php 的 cookies 机制，导致 随机播放时避免重复播放 的功能未实现，后准备使用 jquery 将播放列表存到本地 cookies 然后随机调用，又发现 cookies 有大小限制。之后只能放弃了这个功能，现在只使用 cookies 记录当前播放的曲目以及服务器传回的播放列表中总计的曲目数量，以便进行顺序播放。</strong></p>
<p>一、先创建数据表<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> <span class="string">`music_list`</span> (</span><br><span class="line"><span class="string">`id`</span> <span class="built_in">int</span> <span class="keyword">not</span> <span class="literal">null</span> auto_increment,</span><br><span class="line"><span class="string">`name`</span> <span class="built_in">text</span> <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">default</span> <span class="string">""</span>,</span><br><span class="line"><span class="string">`url`</span> <span class="built_in">text</span> <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">default</span> <span class="string">""</span>,</span><br><span class="line"><span class="string">`singer`</span> <span class="built_in">text</span> <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">default</span> <span class="string">""</span>,</span><br><span class="line"><span class="string">`lrc`</span> <span class="built_in">int</span> <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">default</span> <span class="number">0</span>,</span><br><span class="line"><span class="string">`lrc_data`</span> <span class="built_in">text</span> <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">default</span> <span class="string">""</span>,</span><br><span class="line">primary <span class="keyword">key</span>(<span class="string">`id`</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure></p>
<p>表示偷了个小懒全用的 text</p>
<p>二、上传文件至根目录，命名无所谓，必须 .php 结尾，本站的是 music_list.php<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    session_start();</span><br><span class="line">    header(<span class="string">"Content-type:text/html;charset=utf-8"</span>);</span><br><span class="line">    date_default_timezone_set(<span class="string">'Asia/Shanghai'</span>);</span><br><span class="line">    $pass=<span class="string">'经 md5 加密后的密码'</span>;</span><br><span class="line">    $link = @mysql_connect(<span class="string">"数据库服务器"</span>,<span class="string">'数据库用户名'</span>,<span class="string">'数据库密码'</span>,<span class="keyword">true</span>);</span><br><span class="line">    <span class="keyword">if</span>(!$link) &#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">"Connect Server Failed: "</span> . mysql_error());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!mysql_select_db(<span class="string">'数据库名'</span>,$link)) &#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">"Select Database Failed: "</span> . mysql_error($link));</span><br><span class="line">    &#125;</span><br><span class="line">    mysql_query(<span class="string">'set names utf8'</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">get_music</span><span class="params">($id=null)</span> </span>&#123;</span><br><span class="line">        $return_value=<span class="keyword">array</span>();</span><br><span class="line">        $select_query=mysql_query(<span class="string">'select * from `music_list`'</span>);</span><br><span class="line">        <span class="keyword">while</span> (($value=mysql_fetch_array($select_query))!==<span class="keyword">false</span>) &#123;</span><br><span class="line">            $return_tmp=<span class="keyword">array</span>();</span><br><span class="line">            $return_tmp[<span class="string">'name'</span>]=$value[<span class="string">'name'</span>];</span><br><span class="line">            $return_tmp[<span class="string">'url'</span>]=$value[<span class="string">'url'</span>];</span><br><span class="line">            $return_tmp[<span class="string">'singer'</span>]=$value[<span class="string">'singer'</span>];</span><br><span class="line">            $return_tmp[<span class="string">'id'</span>]=$value[<span class="string">'id'</span>];</span><br><span class="line">            $return_tmp[<span class="string">'lrc'</span>]=htmlspecialchars($value[<span class="string">'lrc'</span>]);</span><br><span class="line">            $return_tmp[<span class="string">'lrc_data'</span>]=str_replace(<span class="keyword">array</span>(<span class="string">"\r"</span>,<span class="string">"\n"</span>),<span class="keyword">array</span>(<span class="string">""</span>,<span class="string">"&lt;br /&gt;"</span>),$value[<span class="string">'lrc_data'</span>]);</span><br><span class="line">            $return_value[]=$return_tmp;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> ($id==<span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> $return_value;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            $return_values=$return_value[$id];</span><br><span class="line">            $return_values[<span class="string">'length'</span>]=count($return_value);</span><br><span class="line">            <span class="keyword">return</span> $return_values;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">chkid</span><span class="params">($id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">empty</span>($id) &amp;&amp; is_numeric($id)) &#123;</span><br><span class="line">            $select_query=mysql_query(<span class="string">'select * from `music_list` where `id`=\''</span>.$id.<span class="string">'\''</span>);</span><br><span class="line">            <span class="keyword">if</span> (mysql_num_rows($select_query)==<span class="number">0</span>) &#123;</span><br><span class="line">                msg(<span class="string">'找不到数据'</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        msg(<span class="string">'找不到数据'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">get_post_data</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!get_magic_quotes_gpc()) &#123;</span><br><span class="line">            $return_value=<span class="keyword">array</span>();</span><br><span class="line">            <span class="keyword">foreach</span> ($_POST <span class="keyword">as</span> $key=&gt;$value) &#123;</span><br><span class="line">                $return_value[$key]=addslashes($value);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            $return_value=$_POST;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> $return_value;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">msg</span><span class="params">($msg)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">'&lt;p&gt;'</span>.$msg.<span class="string">'&lt;/p&gt;&lt;p&gt;&lt;a href="'</span>.$_SERVER[<span class="string">'PHP_SELF'</span>].<span class="string">'"&gt;返回首页&lt;/a&gt;&lt;/p&gt;'</span>;</span><br><span class="line">        echo_footer();</span><br><span class="line">        <span class="keyword">exit</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">echo_header</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">'&lt;html&gt;&lt;head&gt;&lt;meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0"/&gt;&lt;title&gt;博客背景音乐管理中心&lt;/title&gt;&lt;/head&gt;&lt;body&gt;'</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">echo_footer</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">'&lt;/body&gt;&lt;/html&gt;'</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> ($_GET[<span class="string">'action'</span>]==<span class="string">'get_music'</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> ($_GET[<span class="string">'id'</span>]!==<span class="string">''</span> &amp;&amp; is_numeric($_GET[<span class="string">'id'</span>])) &#123;</span><br><span class="line">            $output=get_music($_GET[<span class="string">'id'</span>]);</span><br><span class="line">            preg_match_all(<span class="string">"/^(http:\/\/.*\/)(.*?)$/"</span>,$output[<span class="string">'url'</span>],$outputtmp);</span><br><span class="line">            $output[<span class="string">'url'</span>]=$outputtmp[<span class="number">1</span>][<span class="number">0</span>].rawurlencode($outputtmp[<span class="number">2</span>][<span class="number">0</span>]);</span><br><span class="line">            <span class="keyword">foreach</span> ($output <span class="keyword">as</span> $k=&gt;$v) &#123;</span><br><span class="line">                $output[$k]=urlencode($v);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">echo</span> urldecode(json_encode($output));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">exit</span>();</span><br><span class="line">    &#125; <span class="keyword">elseif</span> ($_GET[<span class="string">'action'</span>]==<span class="string">'get_music_list'</span>) &#123;</span><br><span class="line">        <span class="keyword">echo</span> json_encode(get_music());</span><br><span class="line">        <span class="keyword">exit</span>();</span><br><span class="line">    &#125; <span class="keyword">elseif</span> ($_GET[<span class="string">'action'</span>]==<span class="string">'login'</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> ($_SESSION[<span class="string">'admin'</span>]==<span class="string">'admin'</span>) &#123;</span><br><span class="line">            header(<span class="string">'Location: '</span>.$_SERVER[<span class="string">'PHP_SELF'</span>]);</span><br><span class="line">            <span class="keyword">exit</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        echo_header();</span><br><span class="line">        <span class="keyword">if</span> ($_POST) &#123;</span><br><span class="line">            <span class="keyword">if</span> (md5($_POST[<span class="string">'password'</span>])==$pass) &#123;</span><br><span class="line">                $_SESSION[<span class="string">'admin'</span>]=<span class="string">'admin'</span>;</span><br><span class="line">                header(<span class="string">'Location: '</span>.$_SERVER[<span class="string">'PHP_SELF'</span>]);</span><br><span class="line">                <span class="keyword">exit</span>();</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">echo</span> <span class="string">'&lt;p&gt;密码错误&lt;/p&gt;'</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">'&lt;form action="" method="post"&gt;&lt;p&gt;&lt;label&gt;请输入密码:&lt;input type="password" name="password" /&gt;&lt;/label&gt;&lt;/p&gt;&lt;p&gt;&lt;input type="submit" name="submit" value="提交" /&gt;&lt;/p&gt;&lt;/form&gt;'</span>;</span><br><span class="line">        echo_footer();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> ($_SESSION[<span class="string">'admin'</span>]!==<span class="string">'admin'</span>) &#123;</span><br><span class="line">            header(<span class="string">'Location: '</span>.$_SERVER[<span class="string">'PHP_SELF'</span>].<span class="string">'?action=login'</span>);</span><br><span class="line">            <span class="keyword">exit</span>();</span><br><span class="line">        &#125;</span><br><span class="line">        echo_header();</span><br><span class="line">        <span class="keyword">if</span> ($_GET[<span class="string">'action'</span>]==<span class="string">'del'</span>) &#123;</span><br><span class="line">            chkid($_GET[<span class="string">'id'</span>]);</span><br><span class="line">            <span class="keyword">if</span> ($_POST) &#123;</span><br><span class="line">                $del_query=mysql_query(<span class="string">'delete from `music_list` where `id`=\''</span>.$_GET[<span class="string">'id'</span>].<span class="string">'\''</span>);</span><br><span class="line">                <span class="keyword">if</span> ($del_query) &#123;</span><br><span class="line">                    msg(<span class="string">'删除成功'</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    msg(<span class="string">'删除失败'</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                $select_query=mysql_fetch_array(mysql_query(<span class="string">'select * from `music_list` where `id`=\''</span>.$_GET[<span class="string">'id'</span>].<span class="string">'\''</span>));</span><br><span class="line">                <span class="keyword">echo</span> <span class="string">'&lt;form action="" method="post"&gt;&lt;p&gt;您确定要删除 '</span>.$select_query[<span class="string">'name'</span>].<span class="string">' - '</span>.$select_query[<span class="string">'singer'</span>].<span class="string">'么？&lt;/p&gt;&lt;p&gt;&lt;input type="submit" name="submit" value="确定" /&gt;&lt;a href="'</span>.$_SERVER[<span class="string">'PHP_SELF'</span>].<span class="string">'"&gt;取消&lt;/a&gt;&lt;/p&gt;&lt;/form&gt;'</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">elseif</span> ($_GET[<span class="string">'action'</span>]==<span class="string">'edit'</span>) &#123;</span><br><span class="line">            chkid($_GET[<span class="string">'id'</span>]);</span><br><span class="line">            <span class="keyword">if</span> ($_POST) &#123;</span><br><span class="line">                $post_data=get_post_data();</span><br><span class="line">                $update_query=mysql_query(<span class="string">'update `music_list` set `name`=\''</span>.$post_data[<span class="string">'name'</span>].<span class="string">'\', `url`=\''</span>.$post_data[<span class="string">'url'</span>].<span class="string">'\', `singer`=\''</span>.$post_data[<span class="string">'singer'</span>].<span class="string">'\', `lrc`=\''</span>.$post_data[<span class="string">'lrc'</span>].<span class="string">'\', `lrc_data`=\''</span>.$post_data[<span class="string">'lrc_data'</span>].<span class="string">'\' where `id`=\''</span>.$_GET[<span class="string">'id'</span>].<span class="string">'\''</span>);</span><br><span class="line">                <span class="keyword">if</span> ($update_query) &#123;</span><br><span class="line">                    msg(<span class="string">'数据插入成功'</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    msg(<span class="string">'数据插入失败'</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                $select_query=mysql_fetch_array(mysql_query(<span class="string">'select * from `music_list` where `id`=\''</span>.$_GET[<span class="string">'id'</span>].<span class="string">'\''</span>));</span><br><span class="line">                <span class="keyword">echo</span> <span class="string">'&lt;form action="" method="post"&gt;&lt;p&gt;&lt;label&gt;歌名:&lt;input type="text" name="name" value="'</span>.$select_query[<span class="string">'name'</span>].<span class="string">'" /&gt;&lt;/p&gt;&lt;p&gt;&lt;label&gt;歌手:&lt;input type="text" name="singer" value="'</span>.$select_query[<span class="string">'singer'</span>].<span class="string">'" /&gt;&lt;/p&gt;&lt;p&gt;&lt;label&gt;下载地址:&lt;input type="text" name="url" value="'</span>.$select_query[<span class="string">'url'</span>].<span class="string">'" /&gt;&lt;/p&gt;&lt;p&gt;显示 lrc 歌词: &lt;label&gt;&lt;input type="radio" name="lrc" value="1" '</span>.($select_query[<span class="string">'lrc'</span>]?<span class="string">'checked="checked" '</span>:<span class="string">''</span>).<span class="string">'/&gt;是&lt;/label&gt;&amp;nbsp;&amp;nbsp;&lt;label&gt;&lt;input type="radio" name="lrc" value="0" '</span>.(!$select_query[<span class="string">'lrc'</span>]?<span class="string">'checked="checked" '</span>:<span class="string">''</span>).<span class="string">'/&gt;否&lt;/label&gt;&lt;/p&gt;&lt;p&gt;lrc 歌词(可选):&lt;br /&gt;&lt;textarea name="lrc_data"&gt;'</span>.htmlspecialchars($select_query[<span class="string">'lrc_data'</span>]).<span class="string">'&lt;/textarea&gt;&lt;/p&gt;&lt;p&gt;&lt;input type="submit" name="submit" value="确定" /&gt;&lt;a href="'</span>.$_SERVER[<span class="string">'PHP_SELF'</span>].<span class="string">'"&gt;取消&lt;/a&gt;&lt;/p&gt;&lt;/form&gt;'</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">elseif</span> ($_GET[<span class="string">'action'</span>]==<span class="string">'search'</span>) &#123;</span><br><span class="line">            $post_data=get_post_data();</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">'&lt;form action="?action=search" method="post"&gt;&lt;p&gt;&lt;input name="search" type="text" value="'</span>.$post_data[<span class="string">'search'</span>].<span class="string">'"/&gt;&lt;/p&gt;&lt;p&gt;&lt;input type="submit" value="搜索" /&gt;&lt;/p&gt;&lt;/form&gt;'</span>;</span><br><span class="line">            <span class="keyword">if</span> ($_POST) &#123;</span><br><span class="line">                $search_query=mysql_query(<span class="string">'select * from `music_list` where `name` like \'%'</span>.$post_data[<span class="string">'search'</span>].<span class="string">'%\' or `singer` like \'%'</span>.$post_data[<span class="string">'search'</span>].<span class="string">'%\' or `url` like \'%'</span>.$post_data[<span class="string">'search'</span>].<span class="string">'%\''</span>);</span><br><span class="line">                <span class="keyword">if</span> (mysql_num_rows($search_query)&gt;<span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="keyword">echo</span> <span class="string">'&lt;ol&gt;'</span>;</span><br><span class="line">                    <span class="keyword">while</span> (($value=mysql_fetch_array($search_query))!==<span class="keyword">false</span>) &#123;</span><br><span class="line">                        <span class="keyword">echo</span> <span class="string">'&lt;li&gt;'</span>.$value[<span class="string">'name'</span>].<span class="string">' - '</span>.$value[<span class="string">'singer'</span>].<span class="string">'&amp;nbsp;&lt;a href="'</span>.$_SERVER[<span class="string">'PHP_SELF'</span>].<span class="string">'?action=edit&amp;id='</span>.$value[<span class="string">'id'</span>].<span class="string">'"&gt;编辑&lt;/a&gt;&amp;nbsp;&lt;a href="'</span>.$_SERVER[<span class="string">'PHP_SELF'</span>].<span class="string">'?action=del&amp;id='</span>.$value[<span class="string">'id'</span>].<span class="string">'"&gt;删除&lt;/a&gt;&lt;/li&gt;'</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">echo</span> <span class="string">'&lt;/ol&gt;&lt;a href="'</span>.$_SERVER[<span class="string">'PHP_SELF'</span>].<span class="string">'"&gt;返回首页&lt;/a&gt;'</span>;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">echo</span> <span class="string">'&lt;p&gt;无搜索结果&lt;/p&gt;'</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">elseif</span> ($_GET[<span class="string">'action'</span>]==<span class="string">'add'</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> ($_POST) &#123;</span><br><span class="line">                $post_data=get_post_data();</span><br><span class="line">                $insert_query=mysql_query(<span class="string">'insert into `music_list`(`name`,`url`,`singer`,`lrc`,`lrc_data`) values(\''</span>.$post_data[<span class="string">'name'</span>].<span class="string">'\',\''</span>.$post_data[<span class="string">'url'</span>].<span class="string">'\',\''</span>.$post_data[<span class="string">'singer'</span>].<span class="string">'\',\''</span>.$post_data[<span class="string">'lrc'</span>].<span class="string">'\',\''</span>.$post_data[<span class="string">'lrc_data'</span>].<span class="string">'\')'</span>);</span><br><span class="line">                <span class="keyword">if</span> ($insert_query) &#123;</span><br><span class="line">                    msg(<span class="string">'数据插入成功'</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    msg(<span class="string">'数据插入失败'</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">echo</span> <span class="string">'&lt;form action="" method="post"&gt;&lt;p&gt;&lt;label&gt;歌名:&lt;input type="text" name="name" /&gt;&lt;/p&gt;&lt;p&gt;&lt;label&gt;歌手:&lt;input type="text" name="singer" /&gt;&lt;/p&gt;&lt;p&gt;&lt;label&gt;下载地址:&lt;input type="text" name="url" value="http://" /&gt;&lt;/p&gt;&lt;p&gt;显示 lrc 歌词: &lt;label&gt;&lt;input type="radio" name="lrc" value="1" /&gt;是&lt;/label&gt;&amp;nbsp;&amp;nbsp;&lt;label&gt;&lt;input type="radio" name="lrc" value="0" checked="checked" /&gt;否&lt;/label&gt;&lt;/p&gt;&lt;p&gt;lrc 歌词(可选):&lt;br /&gt;&lt;textarea name="lrc_data"&gt;'</span>.htmlspecialchars($select_query[<span class="string">'lrc_data'</span>]).<span class="string">'&lt;/textarea&gt;&lt;/p&gt;&lt;p&gt;&lt;input type="submit" name="submit" value="确定" /&gt;&lt;a href="'</span>.$_SERVER[<span class="string">'PHP_SELF'</span>].<span class="string">'"&gt;取消&lt;/a&gt;&lt;/p&gt;&lt;/form&gt;'</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">             <span class="keyword">echo</span> <span class="string">'&lt;form action="?action=search" method="post"&gt;&lt;p&gt;&lt;input name="search" type="text" /&gt;&lt;/p&gt;&lt;p&gt;&lt;input type="submit" value="搜索" /&gt;&lt;/p&gt;&lt;/form&gt;'</span>;</span><br><span class="line">             $all_list=get_music();</span><br><span class="line">             <span class="keyword">echo</span> <span class="string">'&lt;ol&gt;'</span>;</span><br><span class="line">             <span class="keyword">foreach</span> ($all_list <span class="keyword">as</span> $value) &#123;</span><br><span class="line">                 <span class="keyword">echo</span> <span class="string">'&lt;li&gt;'</span>.$value[<span class="string">'name'</span>].<span class="string">' - '</span>.$value[<span class="string">'singer'</span>].<span class="string">'&amp;nbsp;&lt;a href="'</span>.$_SERVER[<span class="string">'PHP_SELF'</span>].<span class="string">'?action=edit&amp;id='</span>.$value[<span class="string">'id'</span>].<span class="string">'"&gt;编辑&lt;/a&gt;&amp;nbsp;&lt;a href="'</span>.$_SERVER[<span class="string">'PHP_SELF'</span>].<span class="string">'?action=del&amp;id='</span>.$value[<span class="string">'id'</span>].<span class="string">'"&gt;删除&lt;/a&gt;&lt;/li&gt;'</span>;</span><br><span class="line">             &#125;</span><br><span class="line">             <span class="keyword">echo</span> <span class="string">'&lt;/ol&gt;'</span>;</span><br><span class="line">             <span class="keyword">echo</span> <span class="string">'&lt;a href="'</span>.$_SERVER[<span class="string">'PHP_SELF'</span>].<span class="string">'?action=add"&gt;添加新曲目&lt;/a&gt;'</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        echo_footer();</span><br><span class="line">    &#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>注意不要忘记修改数据库信息和登录密码</p>
<p>三、前台创建小工具<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"/json2.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"/jquery.cookie.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">            /*</span></span><br><span class="line"><span class="undefined">             * Lyric support by kookxiang(http://ikk.me)</span></span><br><span class="line"><span class="undefined">             */</span></span><br><span class="line"><span class="css">            <span class="selector-class">.kk_player</span> &#123; <span class="attribute">width</span>: <span class="number">100%</span>; <span class="attribute">max-height</span>: <span class="number">40px</span>; &#125;</span></span><br><span class="line"><span class="css">            <span class="selector-class">.kk_lrc</span> &#123; <span class="attribute">height</span>: <span class="number">125px</span>; <span class="attribute">overflow</span>: auto; <span class="attribute">padding</span>: <span class="number">0</span>; <span class="attribute">margin</span>: <span class="number">0</span>; &#125;</span></span><br><span class="line"><span class="css">            <span class="selector-class">.kk_lrc</span> <span class="selector-tag">li</span> &#123; <span class="attribute">display</span>: block; <span class="attribute">text-align</span>: center; <span class="attribute">color</span>: gray; <span class="attribute">line-height</span>: <span class="number">20px</span>; <span class="attribute">margin</span>: <span class="number">2px</span> <span class="number">0</span> <span class="number">3px</span> <span class="number">0</span> <span class="meta">!important</span>; <span class="attribute">min-height</span>: <span class="number">20px</span>; &#125;</span></span><br><span class="line"><span class="css">            <span class="selector-class">.kk_lrc</span> <span class="selector-class">.current</span> &#123; <span class="attribute">color</span>: black; <span class="attribute">font-weight</span>: bold; &#125;</span></span><br><span class="line"><span class="css">            <span class="selector-class">.kk_lrc</span>, <span class="selector-class">.kk_lrc</span> * &#123; <span class="attribute">-webkit-transition-duration</span>: <span class="number">1s</span>; <span class="attribute">-moz-transition-duration</span>: <span class="number">1s</span>; <span class="attribute">transition-duration</span>: <span class="number">1s</span>; &#125;</span></span><br><span class="line"><span class="css">            <span class="selector-class">.kk_lrc</span> <span class="selector-pseudo">::selection</span> &#123; <span class="attribute">background</span>: transparent; <span class="attribute">background</span>: <span class="built_in">rgba</span>(127, 127, 127, 0.1); &#125;</span></span><br><span class="line"><span class="css">            <span class="selector-class">.kk_lrc_box</span> &#123; <span class="attribute">position</span>: relative; &#125;</span></span><br><span class="line"><span class="css">            <span class="selector-class">.kk_lrc_box</span><span class="selector-pseudo">:before</span> &#123; <span class="attribute">content</span>: <span class="string">'.'</span>; <span class="attribute">overflow</span>: hidden; <span class="attribute">text-indent</span>: -<span class="number">9999px</span>; <span class="attribute">width</span>: <span class="number">100%</span>; <span class="attribute">height</span>: <span class="number">30px</span>; <span class="attribute">z-index</span>: <span class="number">1</span>; <span class="attribute">display</span>: block; <span class="attribute">position</span>: absolute; <span class="attribute">background</span>: <span class="built_in">url</span>(http://lab.233.imjs.work/getlrc/cover.png) repeat-x <span class="number">0</span> <span class="number">0</span>; <span class="attribute">top</span>: <span class="number">0</span>; <span class="attribute">pointer-events</span>: none; &#125;</span></span><br><span class="line"><span class="css">            <span class="selector-class">.kk_lrc_box</span><span class="selector-pseudo">:after</span> &#123; <span class="attribute">content</span>: <span class="string">'.'</span>; <span class="attribute">overflow</span>: hidden; <span class="attribute">text-indent</span>: -<span class="number">9999px</span>; <span class="attribute">width</span>: <span class="number">100%</span>; <span class="attribute">height</span>: <span class="number">30px</span>; <span class="attribute">z-index</span>: <span class="number">1</span>; <span class="attribute">display</span>: block; <span class="attribute">position</span>: absolute; <span class="attribute">background</span>: <span class="built_in">url</span>(http://lab.233.imjs.work/getlrc/cover.png) repeat-x <span class="number">0</span> <span class="number">100%</span>; <span class="attribute">bottom</span>: <span class="number">0</span>; <span class="attribute">pointer-events</span>: none; &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="css">            <span class="selector-pseudo">::-webkit-scrollbar</span> &#123; <span class="attribute">width</span>: <span class="number">8px</span>; <span class="attribute">height</span>: <span class="number">8px</span>;&#125;</span></span><br><span class="line"><span class="css">            <span class="selector-pseudo">::-webkit-scrollbar-track</span> &#123; <span class="attribute">-webkit-border-radius</span>: <span class="number">10px</span>; <span class="attribute">border-radius</span>: <span class="number">10px</span>; &#125;</span></span><br><span class="line"><span class="css">            <span class="selector-pseudo">::-webkit-scrollbar-thumb</span> &#123; <span class="attribute">-webkit-border-radius</span>: <span class="number">10px</span>; <span class="attribute">border-radius</span>: <span class="number">10px</span>; <span class="attribute">background</span>: <span class="built_in">rgba</span>(96, 96, 96, 0.8); <span class="attribute">-webkit-box-shadow</span>: inset <span class="number">0</span> <span class="number">0</span> <span class="number">6px</span> <span class="built_in">rgba</span>(0, 0, 0, 0.5); &#125;</span></span><br><span class="line"><span class="css">            <span class="selector-pseudo">::-webkit-scrollbar-thumb</span><span class="selector-pseudo">:window-inactive</span> &#123; <span class="attribute">background</span>: <span class="built_in">rgba</span>(96, 96, 96, 0.4); &#125;</span></span><br><span class="line"><span class="undefined">        </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> ael=<span class="literal">false</span>;</span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> tmp_interval=[<span class="number">0</span>,<span class="number">0</span>];</span></span><br><span class="line"><span class="javascript"><span class="function"><span class="keyword">function</span> <span class="title">get_lrc</span>(<span class="params">name,singer</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> script = <span class="built_in">document</span>.createElement(<span class="string">'script'</span>);  </span></span><br><span class="line"><span class="javascript">    script.setAttribute(<span class="string">'src'</span>, <span class="string">"http://lab.liujiantao.me/lrc/?name="</span>+<span class="built_in">encodeURIComponent</span>(name)+<span class="string">"&amp;singer="</span>+<span class="built_in">encodeURIComponent</span>(singer)+<span class="string">"&amp;callback=con_lrc"</span>);  </span></span><br><span class="line"><span class="javascript">    <span class="comment">//load javascript  </span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.getElementsByTagName(<span class="string">'head'</span>)[<span class="number">0</span>].appendChild(script);</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> <span class="literal">true</span>;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="function"><span class="keyword">function</span> <span class="title">con_lrc</span>(<span class="params">lrc_data</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> err_msg=&#123;<span class="string">"-1"</span>:<span class="string">"服务器没有接收到完整数据"</span>,<span class="string">"-2"</span>:<span class="string">"无法正常获取 xml 文件"</span>,<span class="string">"-3"</span>:<span class="string">"找不到该曲目"</span>,<span class="string">"-4"</span>:<span class="string">"未收录 lrc 歌词"</span>,<span class="string">"-5"</span>:<span class="string">"无法正常获取 lrc 歌词"</span>&#125;;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">if</span> (lrc_data.status==<span class="string">"error"</span>) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.error(err_msg[lrc_data.errcode]);</span></span><br><span class="line"><span class="javascript">        $(<span class="string">"#kk_lrc_box"</span>).css(<span class="string">"display"</span>,<span class="string">"none"</span>);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="xml">    $("#player_lrc").html("<span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>");</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> kk_lrc = load_kk_lrc();</span></span><br><span class="line"><span class="javascript">    <span class="keyword">for</span> (j=<span class="number">0</span>;j&lt;lrc_data.result.length;j++) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> lrcArray=lrc_data.result[j].split(<span class="string">"&lt;br /&gt;"</span>);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> timeKey=<span class="keyword">new</span> <span class="built_in">Object</span>();</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> strArray=<span class="keyword">new</span> <span class="built_in">Array</span>();</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> _offset=lrc_data.result[j].match(<span class="regexp">/\[offset.*?(\d*?)\]/</span>);</span></span><br><span class="line"><span class="javascript">        _offset=(<span class="keyword">typeof</span> _offset==<span class="string">"undefined"</span> || _offset===<span class="literal">null</span>)?<span class="number">0</span>:_offset[<span class="number">1</span>]/<span class="number">1000</span>;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>,l = lrcArray.length;i &lt; l;i++) &#123;</span></span><br><span class="line"><span class="javascript">            clause = <span class="built_in">decodeURIComponent</span>(lrcArray[i]).replace(<span class="regexp">/\[\d*?:\d*?([\.:]\d*?)?\]/g</span>,<span class="string">''</span>);</span></span><br><span class="line"><span class="javascript">            timeRegExpArr = <span class="built_in">decodeURIComponent</span>(lrcArray[i]).match(<span class="regexp">/\[(\d*?):(\d*?)([\.:](\d*?))?\]/g</span>);</span></span><br><span class="line"><span class="javascript">            <span class="keyword">if</span> (timeRegExpArr!=<span class="literal">null</span>) &#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">for</span> (<span class="keyword">var</span> k = <span class="number">0</span>,h = timeRegExpArr.length;k &lt; h;k++) &#123; <span class="comment">//第一遍循环，JSON存储歌词，数组存储时间</span></span></span><br><span class="line"><span class="javascript">                    _timeRegExpArr = timeRegExpArr[k].match(<span class="regexp">/^\[(\d*?):(\d*?)([\.:](\d*?))?\]$/</span>);</span></span><br><span class="line"><span class="javascript">                    min = <span class="built_in">parseFloat</span>(_timeRegExpArr[<span class="number">1</span>]);</span></span><br><span class="line"><span class="javascript">                    sec = <span class="built_in">parseFloat</span>(_timeRegExpArr[<span class="number">2</span>]);</span></span><br><span class="line"><span class="javascript">                    msec = <span class="built_in">parseFloat</span>(<span class="keyword">typeof</span> _timeRegExpArr[<span class="number">4</span>]==<span class="string">"undefined"</span>?<span class="number">0</span>:_timeRegExpArr[<span class="number">4</span>]);</span></span><br><span class="line"><span class="undefined">                    time=min * 60 + sec + msec/100 - _offset;</span></span><br><span class="line"><span class="undefined">                    time=(time&lt;0)?0:time;</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">if</span> (!timeKey[time]) &#123;</span></span><br><span class="line"><span class="undefined">                        strArray.push(time);</span></span><br><span class="line"><span class="javascript">                        timeKey[time] = clause + <span class="string">'&lt;br /&gt;'</span>;</span></span><br><span class="line"><span class="javascript">                    &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">                        timeKey[time] += clause + <span class="string">'&lt;br /&gt;'</span>;</span></span><br><span class="line"><span class="undefined">                    &#125;</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="javascript">        strArray.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a,b</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">return</span> a - b;</span></span><br><span class="line"><span class="undefined">        &#125;);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>,l = strArray.length;i &lt; l;i++) &#123; <span class="comment">//第二遍循环，JSON存储时间，数组存储歌词</span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> tempIndex = strArray[i],</span></span><br><span class="line"><span class="undefined">            tempClause = timeKey[tempIndex];</span></span><br><span class="line"><span class="undefined">            kk_lrc.add_lrc(tempIndex,tempClause);</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">    kk_lrc.init();</span></span><br><span class="line"><span class="javascript">    ael=<span class="literal">true</span>;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> <span class="literal">true</span>;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="function"><span class="keyword">function</span> <span class="title">add_lrc</span>(<span class="params">lrc_data</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    con_lrc(&#123;<span class="string">'status'</span>:<span class="string">'success'</span>,<span class="string">'errcode'</span>:<span class="string">'0'</span>,<span class="string">'result'</span>:[lrc_data.replace(<span class="string">"\n"</span>,<span class="string">"&lt;br /&gt;"</span>)]&#125;);</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> <span class="literal">true</span>;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">/*</span></span><br><span class="line"><span class="javascript"> * Lyric support by kookxiang(http:<span class="comment">//ikk.me)</span></span></span><br><span class="line"><span class="undefined"> */</span></span><br><span class="line"><span class="javascript"><span class="function"><span class="keyword">function</span> <span class="title">load_kk_lrc</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> kk_lrc = <span class="keyword">new</span> <span class="built_in">Object</span>();</span></span><br><span class="line"><span class="undefined">    kk_lrc.extra_top = 1;</span></span><br><span class="line"><span class="undefined">    kk_lrc.current = -1;</span></span><br><span class="line"><span class="undefined">    kk_lrc.current_obj;</span></span><br><span class="line"><span class="undefined">    kk_lrc.offset = 0;</span></span><br><span class="line"><span class="undefined">    kk_lrc.current_start = -1;</span></span><br><span class="line"><span class="undefined">    kk_lrc.next_update_time = -1;</span></span><br><span class="line"><span class="undefined">    kk_lrc.showtime = -1;</span></span><br><span class="line"><span class="undefined">    kk_lrc.lrc_offset = -1;</span></span><br><span class="line"><span class="undefined">    kk_lrc.lrc_height = -1;</span></span><br><span class="line"><span class="undefined">    kk_lrc.lrc = [];</span></span><br><span class="line"><span class="javascript">    kk_lrc.lrcobj = <span class="literal">null</span>;</span></span><br><span class="line"><span class="undefined">    kk_lrc.target = 0;</span></span><br><span class="line"><span class="undefined">    kk_lrc._target = 0;</span></span><br><span class="line"><span class="javascript">    kk_lrc.player_obj = <span class="built_in">document</span>.getElementById(<span class="string">'player_player'</span>);</span></span><br><span class="line"><span class="javascript">    kk_lrc.lrc_obj = <span class="built_in">document</span>.getElementById(<span class="string">'player_lrc'</span>);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">    kk_lrc.scroll_lrc = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span>(<span class="keyword">typeof</span> kk_lrc.lrc[kk_lrc.current+<span class="number">2</span>] != <span class="string">"undefined"</span>)&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">for</span>(id <span class="keyword">in</span> kk_lrc.lrcobj) kk_lrc.lrcobj[id].className = <span class="string">''</span>;</span></span><br><span class="line"><span class="javascript">            kk_lrc.lrcobj[kk_lrc.current+<span class="number">3</span>].className = <span class="string">'current'</span>;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">        kk_lrc.current_start = kk_lrc.lrc[kk_lrc.current];</span></span><br><span class="line"><span class="undefined">        kk_lrc.current++;</span></span><br><span class="line"><span class="undefined">        kk_lrc.current_obj = kk_lrc.lrcobj[kk_lrc.current+2];</span></span><br><span class="line"><span class="undefined">        kk_lrc.next_update_time = kk_lrc.lrc[kk_lrc.current];</span></span><br><span class="line"><span class="undefined">        kk_lrc.showtime = kk_lrc.next_update_time - kk_lrc.current_start;</span></span><br><span class="line"><span class="undefined">        kk_lrc.lrc_offset = kk_lrc.current_obj.offsetTop;</span></span><br><span class="line"><span class="undefined">        kk_lrc.lrc_height = kk_lrc.current_obj.offsetHeight;</span></span><br><span class="line"><span class="undefined">    &#125;;</span></span><br><span class="line"><span class="javascript">    kk_lrc.check_lrc_update = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> curTime = kk_lrc.player_obj.currentTime;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span>(curTime &gt;= kk_lrc.next_update_time - <span class="number">0.2</span>)&#123;</span></span><br><span class="line"><span class="undefined">            kk_lrc.scroll_lrc();</span></span><br><span class="line"><span class="undefined">            kk_lrc.check_lrc_update();</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span>(<span class="keyword">typeof</span> kk_lrc.lrc[kk_lrc.current<span class="number">-1</span>] != <span class="string">"undefined"</span>)&#123;</span></span><br><span class="line"><span class="undefined">            kk_lrc.extra_top = (kk_lrc.next_update_time - curTime) / kk_lrc.showtime;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="javascript">        kk_lrc.target = <span class="built_in">Math</span>.round(kk_lrc.lrc_offset - (<span class="number">125</span> - kk_lrc.lrc_height) / <span class="number">2</span>);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span>(kk_lrc.target &lt; <span class="number">0</span>) kk_lrc.target = <span class="number">0</span>;</span></span><br><span class="line"><span class="undefined">    &#125;;</span></span><br><span class="line"><span class="javascript">    kk_lrc.init = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        kk_lrc.add_lrc(<span class="string">'999999'</span>, <span class="string">''</span>);</span></span><br><span class="line"><span class="javascript">        kk_lrc.add_lrc(<span class="string">'999999'</span>, <span class="string">''</span>);</span></span><br><span class="line"><span class="javascript">        kk_lrc.add_lrc(<span class="string">'999999'</span>, <span class="string">''</span>);</span></span><br><span class="line"><span class="undefined">        kk_lrc.current = -1;</span></span><br><span class="line"><span class="javascript">        kk_lrc.lrcobj = kk_lrc.lrc_obj.getElementsByTagName(<span class="string">'li'</span>);</span></span><br><span class="line"><span class="undefined">        kk_lrc.current_obj = kk_lrc.lrcobj[0];</span></span><br><span class="line"><span class="undefined">        kk_lrc.scroll_lrc();</span></span><br><span class="line"><span class="undefined">        kk_lrc.check_lrc_update();</span></span><br><span class="line"><span class="javascript">                <span class="keyword">if</span> (ael==<span class="literal">false</span>) &#123;</span></span><br><span class="line"><span class="javascript">        kk_lrc.player_obj.addEventListener(<span class="string">"seeked"</span> ,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="undefined">            kk_lrc.current = -1;</span></span><br><span class="line"><span class="undefined">            kk_lrc.scroll_lrc();</span></span><br><span class="line"><span class="undefined">            kk_lrc.check_lrc_update();</span></span><br><span class="line"><span class="undefined">        &#125;);</span></span><br><span class="line"><span class="javascript">        kk_lrc.player_obj.addEventListener(<span class="string">"durationchange"</span> ,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="undefined">            kk_lrc.current = -1;</span></span><br><span class="line"><span class="undefined">            kk_lrc.scroll_lrc();</span></span><br><span class="line"><span class="undefined">            kk_lrc.check_lrc_update();</span></span><br><span class="line"><span class="undefined">        &#125;);</span></span><br><span class="line"><span class="javascript">                &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="undefined">                    clearInterval(tmp_interval[0]);</span></span><br><span class="line"><span class="undefined">                    clearInterval(tmp_interval[1]);</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="javascript">        tmp_interval[<span class="number">0</span>]=setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">if</span>(kk_lrc.player_obj.paused) <span class="keyword">return</span>;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">if</span>(kk_lrc.current_start &gt; kk_lrc.player_obj.currentTime)&#123;</span></span><br><span class="line"><span class="undefined">                    kk_lrc.current = -1;</span></span><br><span class="line"><span class="undefined">                    kk_lrc.scroll_lrc();</span></span><br><span class="line"><span class="undefined">                    kk_lrc.check_lrc_update();</span></span><br><span class="line"><span class="javascript">                &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="undefined">                    kk_lrc.check_lrc_update();</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">            &#125;, 100);</span></span><br><span class="line"><span class="javascript">            tmp_interval[<span class="number">1</span>]=setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">if</span>(kk_lrc._target == kk_lrc.target) <span class="keyword">return</span>;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">if</span>(<span class="built_in">Math</span>.abs(kk_lrc.lrc_obj.scrollTop - kk_lrc._target) &gt; kk_lrc.lrc_height)&#123;</span></span><br><span class="line"><span class="undefined">                    kk_lrc._target = kk_lrc.lrc_obj.scrollTop;</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">if</span>(kk_lrc.player_obj.paused)&#123;</span></span><br><span class="line"><span class="undefined">                    kk_lrc._target = kk_lrc.fixFloat(kk_lrc._target * 0.8 + kk_lrc.target * 0.2);</span></span><br><span class="line"><span class="javascript">                &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="undefined">                    kk_lrc._target = kk_lrc.fixFloat(kk_lrc._target * 0.98 + kk_lrc.target * 0.02);</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">                kk_lrc.lrc_obj.scrollTop = kk_lrc._target;</span></span><br><span class="line"><span class="undefined">            &#125;, 5);</span></span><br><span class="line"><span class="undefined">    &#125;;</span></span><br><span class="line"><span class="javascript">    kk_lrc.add_lrc = <span class="function"><span class="keyword">function</span> (<span class="params">time, lrc</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        kk_lrc.lrc.push(<span class="built_in">parseFloat</span>(time) + kk_lrc.offset);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> lrc_line = <span class="built_in">document</span>.createElement(<span class="string">"li"</span>);</span></span><br><span class="line"><span class="undefined">        lrc_line.innerHTML = lrc;</span></span><br><span class="line"><span class="undefined">        kk_lrc.lrc_obj.appendChild(lrc_line);</span></span><br><span class="line"><span class="undefined">    &#125;;</span></span><br><span class="line"><span class="javascript">    kk_lrc.get_lrc = <span class="function"><span class="keyword">function</span> (<span class="params">num</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span>(<span class="keyword">typeof</span> kk_lrc.lrc[num] != <span class="string">"undefined"</span>)&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">return</span> kk_lrc.lrc[num][<span class="number">1</span>];</span></span><br><span class="line"><span class="javascript">        &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">return</span> <span class="string">''</span>;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="javascript">    kk_lrc.setoffset = <span class="function"><span class="keyword">function</span> (<span class="params">num</span>) </span>&#123;</span></span><br><span class="line"><span class="undefined">        kk_lrc.offset = num / 1000;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="javascript">    kk_lrc.fixFloat = <span class="function"><span class="keyword">function</span> (<span class="params">num</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> <span class="built_in">Math</span>.ceil(num * <span class="number">10</span>) / <span class="number">10</span>;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> kk_lrc;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">get_music</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        $(<span class="string">"#audio_player"</span>).html(<span class="string">'&lt;p&gt;正在加载播放器，请稍候&lt;/p&gt;'</span>);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (<span class="string">"undefined"</span>==<span class="keyword">typeof</span> $.cookie(<span class="string">"music_list"</span>) || $.cookie(<span class="string">"music_list"</span>)==<span class="literal">null</span>) &#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> music_id=<span class="number">0</span>;</span></span><br><span class="line"><span class="javascript">        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> cookie_music=<span class="built_in">JSON</span>.parse($.cookie(<span class="string">"music_list"</span>));</span></span><br><span class="line"><span class="javascript">            <span class="keyword">if</span> ((cookie_music[<span class="string">'id'</span>]+<span class="number">1</span>)==cookie_music[<span class="string">'length'</span>]) &#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> music_id=<span class="number">0</span>;</span></span><br><span class="line"><span class="javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">var</span> music_id=cookie_music[<span class="string">'id'</span>]+<span class="number">1</span>;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">var</span> music_id=(<span class="string">"undefined"</span>!==<span class="keyword">typeof</span> <span class="built_in">arguments</span>[<span class="number">0</span>])?<span class="built_in">arguments</span>[<span class="number">0</span>]:music_id;</span></span><br><span class="line"><span class="javascript">        $.ajax(&#123;</span></span><br><span class="line"><span class="javascript">            type: <span class="string">'get'</span>,</span></span><br><span class="line"><span class="javascript">            url: <span class="string">'/music_list.php'</span>,</span></span><br><span class="line"><span class="javascript">            dataType: <span class="string">'json'</span>,</span></span><br><span class="line"><span class="undefined">            timeout: 3000,</span></span><br><span class="line"><span class="javascript">            data: &#123;<span class="string">"action"</span>:<span class="string">"get_music"</span>,<span class="string">"id"</span>:music_id&#125;,</span></span><br><span class="line"><span class="javascript">            success: <span class="function"><span class="keyword">function</span>(<span class="params">music</span>) </span>&#123;</span></span><br><span class="line"><span class="xml">                $("#audio_player").html('<span class="tag">&lt;<span class="name">p</span>&gt;</span>当前<span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"audio_player_status"</span>&gt;</span>正在缓冲准备播放<span class="tag">&lt;/<span class="name">span</span>&gt;</span>的是:<span class="tag">&lt;<span class="name">br</span> /&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"music_name"</span>&gt;</span>' +  music['name'] + ' - ' + music['singer'] + '<span class="tag">&lt;/<span class="name">span</span>&gt;</span>&amp;nbsp;<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"####"</span> <span class="attr">id</span>=<span class="string">"reload_audio_player"</span>&gt;</span>换一首<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span>');</span></span><br><span class="line"><span class="javascript">                <span class="keyword">if</span> (<span class="keyword">typeof</span> $(<span class="string">"#audio_list"</span>).html()!==<span class="string">'undefined'</span>) $(<span class="string">"#audio_list"</span>).html($(<span class="string">"#audio_list"</span>).html().replace(<span class="regexp">/&lt;\/?span.*?&gt;/g</span>,<span class="string">''</span>).replace($(<span class="string">"#music_name"</span>).html(),<span class="string">'&lt;span style="font-weight: bold; color: red"&gt;'</span>+$(<span class="string">"#music_name"</span>).html()+<span class="string">'&lt;/span&gt;'</span>));</span></span><br><span class="line"><span class="javascript">                <span class="keyword">if</span> ($(<span class="built_in">document</span>).width()&gt;=<span class="number">768</span> &amp;&amp; (<span class="keyword">new</span> <span class="built_in">Date</span>().getHours()&gt;=<span class="number">8</span> &amp;&amp; <span class="keyword">new</span> <span class="built_in">Date</span>().getHours()&lt;<span class="number">23</span>)) &#123;</span></span><br><span class="line"><span class="javascript">                    $(<span class="string">"#player_player"</span>).attr(<span class="string">"autoplay"</span>,<span class="string">"autoplay"</span>);</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="javascript">                $(<span class="string">"#player_player"</span>).attr(<span class="string">"src"</span>,music[<span class="string">'url'</span>]);</span></span><br><span class="line"><span class="javascript">                <span class="keyword">if</span> (music[<span class="string">'lrc'</span>]==<span class="string">"0"</span>) &#123;</span></span><br><span class="line"><span class="javascript">                    $(<span class="string">"#kk_lrc_box"</span>).css(<span class="string">"display"</span>,<span class="string">"none"</span>);</span></span><br><span class="line"><span class="javascript">                &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">                    $(<span class="string">"#kk_lrc_box"</span>).css(<span class="string">"display"</span>,<span class="string">"block"</span>);</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">if</span> (music[<span class="string">'lrc_data'</span>]!==<span class="string">""</span>) &#123;</span></span><br><span class="line"><span class="javascript">                        add_lrc(music[<span class="string">'lrc_data'</span>]);</span></span><br><span class="line"><span class="javascript">                    &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">                        get_lrc(music[<span class="string">'name'</span>],music[<span class="string">'singer'</span>]);</span></span><br><span class="line"><span class="undefined">                    &#125;</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="javascript">                $(<span class="string">"#audio_player2"</span>).html(<span class="string">'&lt;!-- id='</span> + music_id + <span class="string">' mysql_id='</span> + music[<span class="string">'id'</span>] + <span class="string">' --&gt;'</span> + (($(<span class="built_in">document</span>).width()&lt;<span class="number">768</span> || <span class="keyword">new</span> <span class="built_in">Date</span>().getHours()&lt;<span class="number">8</span> || <span class="keyword">new</span> <span class="built_in">Date</span>().getHours()&gt;=<span class="number">23</span>)?<span class="string">"&lt;p&gt;&lt;small&gt;已为您关闭了自动播放&lt;/small&gt;&lt;/p&gt;"</span>:<span class="string">""</span>));</span></span><br><span class="line"><span class="javascript">                $.cookie(<span class="string">"music_list"</span>,<span class="string">'&#123;"id":'</span>+ music_id + <span class="string">',"length":'</span> + music[<span class="string">'length'</span>] + <span class="string">'&#125;'</span>,&#123;<span class="attr">expires</span>: <span class="number">7</span>, <span class="attr">path</span>: <span class="string">'/'</span>&#125;);</span></span><br><span class="line"><span class="undefined">            &#125;,</span></span><br><span class="line"><span class="javascript">            error: <span class="function"><span class="keyword">function</span>(<span class="params">XMLHttpRequest,status</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">if</span> (status == <span class="string">'timeout'</span>) &#123;</span></span><br><span class="line"><span class="xml">                    $("#audio_player").html('<span class="tag">&lt;<span class="name">p</span>&gt;</span>请求超时，<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"####"</span> <span class="attr">id</span>=<span class="string">"reload_audio_player"</span>&gt;</span>重新加载<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span>');</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">return</span> <span class="literal">true</span>;</span></span><br><span class="line"><span class="javascript">                &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">                    $(<span class="string">"#audio_player"</span>).html(<span class="string">'&lt;p&gt;无法请求播放数据&lt;/p&gt;'</span>);</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">return</span> <span class="literal">true</span>;</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;);</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="javascript">    <span class="function"><span class="keyword">function</span> <span class="title">change_audio_player_status</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        $(<span class="string">"#audio_player_status"</span>).html(<span class="string">"正在播放"</span>)</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="javascript">    $(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="undefined">        get_music();</span></span><br><span class="line"><span class="javascript">        $(<span class="string">"#audio_player"</span>).on(<span class="string">'click'</span>, <span class="string">"#reload_audio_player"</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="undefined">            get_music();</span></span><br><span class="line"><span class="undefined">        &#125;);</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"audio_player"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">audio</span> <span class="attr">src</span>=<span class="string">""</span> <span class="attr">controls</span>=<span class="string">"controls"</span> <span class="attr">onended</span>=<span class="string">"get_music()"</span> <span class="attr">onplaying</span>=<span class="string">"change_audio_player_status()"</span> <span class="attr">style</span>=<span class="string">"width: 100%"</span> <span class="attr">id</span>=<span class="string">"player_player"</span>&gt;</span>您的浏览器不支持 HTML5<span class="tag">&lt;/<span class="name">audio</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"audio_player2"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"kk_lrc_box"</span> <span class="attr">id</span>=<span class="string">"kk_lrc_box"</span>&gt;</span><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"player_lrc"</span> <span class="attr">class</span>=<span class="string">"kk_lrc"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>四、将下面这个文件解压上传至根目录，里面分别是 jQuery 的 JSON 插件和 Cookies 插件<br><a href="/uploads/2014/01/jq.zip">jq.zip</a></p>
<p>效果如本页所示。有段时间没写 php 了，如果有什么 bug 或者建议请评论，谢谢</p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/程序发布/">程序发布</a>
    </span>
    

    

    </div>

    
    <div class="article-meta pull-right">
      <span>
        <i class="icon-comments"></i>
        <span>
          <a href="/2014/01/29/无聊给博客加了个背景音乐/#comment">评论</a>
        </span>
      </span>
    </div>
    
  </div>
</article>



  <article>

  
    
    <h3 class="article-title"><a href="/2014/01/24/生活就像心电图，一帆风顺除非你死了/"><span>生活就像心电图，一帆风顺除非你死了</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2014/01/24/生活就像心电图，一帆风顺除非你死了/" rel="bookmark">
        <time class="entry-date published" datetime="2014-01-24T10:47:59.000Z">
          2014-01-24
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p>突然发现我有篇文章被很多地方转载，没有署名，没有通知过我，还有的人说是自己写的，或者被断章取义的误会。想了一会儿以后，决定玩会儿睡觉了。<br>好友邻们提醒我解释一下，要不老掉粉。其实说不生气，不委屈，是假的。但是怎么说呢！生活总有意外，当你不能掌握的时候，只能随遇而安。我爱人常说“生活就像心电图，一帆风顺除非你死了。”我妈常说“真能万事如意，基本离死不远了。”我的自我介绍里有句话：解释和争论，只在两种情况下有意义，一种是这个人很重要，一种是这件事很重要。丹妮尔•拉波特说“优秀的人都精神强大，是因为他们都将精力集中于自己清晰的目标上，这使他们能够掌控自己的生活，而不是被生活推着走，被生活所累。”<br>我现在大着肚子，在怀孕最重要的时期。我为这事解释一顿，挨个找这些人给我稿费，删除，道歉，解释，然后呢？我惹一肚子气，影响胎教，影响身体。虽然每天都掉粉，但是真的理解我，认可我的友邻，还是会关注我，对于他们来说，这就是件小事。而对于现在的我来说，没有人比我肚子里的这个更重要。有一次看失恋的文章，有过这么一个小故事，我觉得也适合这件事。<br>小猴从树枝上掉下来，肚皮划破了一道小口子。它指着伤口让同伴们看，大家轮流察看伤口，对小猴子的不幸给予了极大的同情。而伤口每经过一次察看，便被撕开一点，最后小猴子因伤口太大、流血过多而死去了。原本无关紧要的小伤小痛，却因为自己和他人的过分惦记和关注，最终导致小痛变剧痛，小伤成大伤。<br>露易丝·海的《生命的重建》有这样一段话：“我们必须选择释怀过去，并原谅每一个人，包括我们自己。我们可能不知道该怎样原谅，也可能不想原谅，但我们说出心甘情愿地原谅这句话时，就开始了疗伤过程。如果要自我疗伤，释怀过去并原谅每一个人就成了必须遵守的诫命。”人们总说时间会改变一切，但是实际上你需要自己去改变。在这个世界上什么都可能不是你的，所以千万别多想。</p>
<p>博主来扯个淡：<br>　　话说我也是转了不少的”鼹鼠的土豆”所写的文章了，但也只是因为觉得内容不错，拿来分享分享。记得以前第一次听说”鼹鼠的土豆”的时候还是在好几年前的一档广播节目里，是中央台经济之声的，经常会读点好文章、好故事，以前夜里无聊时也经常听。当时讲的主要的内容也不怎么记得了，不过自此以后我上网搜了下，发现作者写的文章。。。嗯，更确切的说是日记吧，挺符合我的口味的，同时也是让我受益匪浅啊。而在开了这个博客以后，我就经常转些她写的文章，就像前文所说的，”分享分享”，并且，把这些文章都放在了同一个分类里，以便日后翻看。不过也有部分朋友误以为这些文章是我写的，这个。。见笑了，我的文笔还没那么好，况且，我的生活经验也没那么丰富，又怎能理解这么多道理 = = 倒是记得以前建这个分类时发过一篇声明，不过倒也是挺久远的事情了。。。<a href="http://futa.ooo/174.html">关于本分类</a><br>　　聊聊本文内容，作为标题的这句话，想必各位都听说过。是啊，要是什么事都一帆风顺，你又能从中吸取到什么呢？胜败乃兵家常事，为何要去为了一次失败而去气馁？甚至放弃？不过可怕的是失败仍不自知，相信各位也听说过一句话，”失败是成功之母”，有人只看出了字面是意思，认为不去努力，这次失败了，下次就自然而然的会成功。可不是这样的啊，但是，还有更可怕的事，有些人失败后不去努力也就罢了，不去从自己身上找问题，反而去 YY 成功者怎么样怎么样。我为什么会突然想到这些呢？记得前几天的《爱情公寓》里有说到一个”富二代”只会打高尔夫，原因是其父亲担心其进行其他运动时受到伤害，而不让他参加其他的运动项目。相信看过的各位应该对其中的集体用高尔夫球杆站在桌球台上打母球的事很有印象吧？当然这是恶搞 = = 但我却因此想到有人可能会嘲笑这位”富二代”只会打高尔夫，嗯。。在这之前你有没有想过，你并不会打高尔夫，甚至，其他的运动也不去怎么参加？(好吧，这似乎有点夸大了，但这只是举个例子。)你有什么资格去评论别人？当然，如果你说言论自由，OK。更有甚者，认为这位”富二代”自己过得并不开心。我倒是又想说说，人家过得开心不开心关你什么事，反正过得比你开心就是了。引申出来，说个比较常见的事儿，也是各位”学渣”公认的事儿。相信各位”学渣”一定知道大部分的”学霸”会在各种各样的假期去参加各种各样的兴趣班、补习班、提高班，然后就会觉得人家过得并不开心。是，就算不开心，人家好歹还是可以拿自己的成绩和自己的”兴趣”证书来炫耀的，你呢？比如这位”学霸”，<a href="http://futa.ooo/1175.html">初三女儿爱学习不让补课就绝食</a>，例子可能有些极端，但人家可以拿得出成绩。你呢？又有什么？其实，即使是”学渣”，即使对学习没有兴趣，即使无论如何在学习上都拼不过别人，那还是可以发展一下其他的特长的嘛，毕竟，你要是没有被利用的价值，早晚会被淘汰，无论是被朋友，被学校，被社会。<br>　　咳咳，扯远了，只是想到了一些以前的事情，希望能在这里吐个槽，如果可能的话，也能和各位交流交流。最后提一点，这位”鼹鼠的土豆”是豆瓣上的，写的东西相当值得推荐，为了提高自身的”正能量”去看看也是不错的。</p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/鼹鼠的土豆/">鼹鼠的土豆</a>
    </span>
    

    

    </div>

    
    <div class="article-meta pull-right">
      <span>
        <i class="icon-comments"></i>
        <span>
          <a href="/2014/01/24/生活就像心电图，一帆风顺除非你死了/#comment">评论</a>
        </span>
      </span>
    </div>
    
  </div>
</article>



  <article>

  
    
    <h3 class="article-title"><a href="/2014/01/20/php计算24点游戏/"><span>php计算24点游戏</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2014/01/20/php计算24点游戏/" rel="bookmark">
        <time class="entry-date published" datetime="2014-01-19T19:42:43.000Z">
          2014-01-20
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p>修改了下，加了个表单。原文转载自 <a href="http://www.alixixi.com/program/a/2008050731708.shtml" target="_blank" rel="noopener">http://www.alixixi.com/program/a/2008050731708.shtml</a><br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">set_time_limit(<span class="number">0</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;html&gt;</span><br><span class="line">	&lt;head&gt;</span><br><span class="line">		&lt;meta name=<span class="string">"viewport"</span> content=<span class="string">"width=device-width, initial-scale=1, maximum-scale=1"</span> /&gt;</span><br><span class="line">		&lt;meta http-equiv=<span class="string">"pragram"</span> content=<span class="string">"no-cache"</span>&gt;</span><br><span class="line">		&lt;meta http-equiv=<span class="string">"cache-control"</span> content=<span class="string">"no-cache, must-revalidate"</span>&gt;</span><br><span class="line">		&lt;meta http-equiv=<span class="string">"expires"</span> content=<span class="string">"0"</span>&gt;</span><br><span class="line">		&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/HTML; charset=utf-8"</span>&gt;</span><br><span class="line">		&lt;title&gt;<span class="number">24</span> 点计算器&lt;/title&gt;</span><br><span class="line">	&lt;/head&gt;</span><br><span class="line">	&lt;body&gt;</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">$values = explode(<span class="string">' '</span>,$_POST[<span class="string">'num'</span>]);</span><br><span class="line">$result = <span class="number">24</span>;</span><br><span class="line"></span><br><span class="line">$list = <span class="keyword">array</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ($_POST) &#123;</span><br><span class="line">makeValue($values); </span><br><span class="line"><span class="keyword">echo</span> <span class="string">'&lt;pre&gt;'</span>;</span><br><span class="line">print_r($list);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">'&lt;/pre&gt;'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeValue</span><span class="params">($values, $set=array<span class="params">()</span>)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">	$words = <span class="keyword">array</span>(<span class="string">"+"</span>, <span class="string">"-"</span>, <span class="string">"*"</span>, <span class="string">"/"</span>); </span><br><span class="line">	<span class="keyword">if</span>(sizeof($values)==<span class="number">1</span>) </span><br><span class="line">	&#123; </span><br><span class="line">		$set[] = array_shift($values); </span><br><span class="line">		<span class="keyword">return</span> makeSpecial($set); </span><br><span class="line">	&#125; </span><br><span class="line">	</span><br><span class="line">	<span class="keyword">foreach</span>($values <span class="keyword">as</span> $key=&gt;$value) </span><br><span class="line">	&#123; </span><br><span class="line">		$tmpValues = $values; </span><br><span class="line">		<span class="keyword">unset</span>($tmpValues[$key]); </span><br><span class="line">		<span class="keyword">foreach</span>($words <span class="keyword">as</span> $word) </span><br><span class="line">		&#123; </span><br><span class="line">			makeValue($tmpValues, array_merge($set, <span class="keyword">array</span>($value, $word))); </span><br><span class="line">		&#125; </span><br><span class="line">	&#125; </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeSpecial</span><span class="params">($set)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">	$size = sizeof($set);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span>($size&lt;=<span class="number">3</span> || !in_array(<span class="string">"/"</span>, $set) &amp;&amp; !in_array(<span class="string">"*"</span>, $set)) </span><br><span class="line">	&#123; </span><br><span class="line">		<span class="keyword">return</span> makeResult($set); </span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span>($len=<span class="number">3</span>; $len&lt;$size<span class="number">-1</span>; $len+=<span class="number">2</span>) </span><br><span class="line">	&#123; </span><br><span class="line">		<span class="keyword">for</span>($start=<span class="number">0</span>; $start&lt;$size<span class="number">-1</span>; $start+=<span class="number">2</span>) </span><br><span class="line">		&#123; </span><br><span class="line">			<span class="keyword">if</span>(!($set[$start<span class="number">-1</span>]==<span class="string">"*"</span> || $set[$start<span class="number">-1</span>]==<span class="string">"/"</span> || $set[$start+$len]==<span class="string">"*"</span> || $set[$start+$len]==<span class="string">"/"</span>)) </span><br><span class="line">				<span class="keyword">continue</span>; </span><br><span class="line">			$subSet = array_slice($set, $start, $len); </span><br><span class="line">			<span class="keyword">if</span>(!in_array(<span class="string">"+"</span>, $subSet) &amp;&amp; !in_array(<span class="string">"-"</span>, $subSet)) </span><br><span class="line">				<span class="keyword">continue</span>; </span><br><span class="line">			$tmpSet = $set; </span><br><span class="line">			array_splice($tmpSet, $start, $len<span class="number">-1</span>); </span><br><span class="line">			$tmpSet[$start] = <span class="string">"("</span>.implode(<span class="string">""</span>, $subSet).<span class="string">")"</span>; </span><br><span class="line">			makeSpecial($tmpSet); </span><br><span class="line">		&#125; </span><br><span class="line">	&#125; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeResult</span><span class="params">($set)</span> </span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">	<span class="keyword">global</span> $result, $list; </span><br><span class="line">	$str = implode(<span class="string">""</span>, $set); </span><br><span class="line">	@<span class="keyword">eval</span>(<span class="string">"\$num=$str;"</span>); </span><br><span class="line">	<span class="keyword">if</span>($num==$result &amp;&amp; !in_array($str, $list)) </span><br><span class="line">	$list[] = $str; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">	&lt;center&gt;</span><br><span class="line">			&lt;form action=<span class="string">""</span> method=<span class="string">"post"</span>&gt;</span><br><span class="line">				&lt;p&gt;&lt;label&gt;请输入四个数字，空格分割：&lt;br /&gt;&lt;input type=<span class="string">"text"</span> name=<span class="string">"num"</span> /&gt;&lt;/label&gt;&lt;/p&gt;</span><br><span class="line">				&lt;p&gt;&lt;input type=<span class="string">"submit"</span> name=<span class="string">"submit"</span> value=<span class="string">"提交"</span> /&gt;&lt;/p&gt;</span><br><span class="line">			&lt;/form&gt;</span><br><span class="line">		&lt;/center&gt;</span><br><span class="line">	&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/Web-开发/">Web 开发</a>
    </span>
    

    

    </div>

    
    <div class="article-meta pull-right">
      <span>
        <i class="icon-comments"></i>
        <span>
          <a href="/2014/01/20/php计算24点游戏/#comment">评论</a>
        </span>
      </span>
    </div>
    
  </div>
</article>




<nav class="pagination">
  
  <a href="/page/14/" class="pagination-prev">上一页</a>
  
  
  <a href="/page/16/" class="pagination-next">下一页</a>
  
</nav>
    </main>

    <footer class="site-footer">
  <p class="site-info">
    Proudly powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and
    Theme by <a href="https://github.com/CodeDaraW/Hacker" target="_blank">Hacker</a>
    </br>
    
    &copy; 2018 403 Forbidden
    
  </p>
</footer>
    
  </div>
</div>
</body>
</html>