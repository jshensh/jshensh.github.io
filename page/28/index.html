<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>第 28 页 | 博客</title>

  
  <meta name="author" content="403 Forbidden">
  

  

  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  

  <meta property="og:site_name" content="博客"/>

  
  <meta property="og:image" content="/favicon.ico"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="博客" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
</head>


<body>
<div class="blog">
  <div class="content">

    <header>
  <div class="site-branding">
    <h1 class="site-title">
      <a href="/">博客</a>
    </h1>
    <p class="site-description"></p>
  </div>
  <nav class="site-navigation">
    <ul>
      
        <li><a href="/">主页</a></li>
      
        <li><a href="/archives">归档</a></li>
      
        <li><a href="/categories">分类</a></li>
      
    </ul>
  </nav>
</header>

    <main class="site-main posts-loop">
    
  <article>

  
    
    <h3 class="article-title"><a href="/2013/05/08/Linux流量监控工具 - iftop (最全面的iftop教程)(转载)/"><span>Linux流量监控工具 - iftop (最全面的iftop教程)(转载)</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2013/05/08/Linux流量监控工具 - iftop (最全面的iftop教程)(转载)/" rel="bookmark">
        <time class="entry-date published" datetime="2013-05-07T23:52:52.000Z">
          2013-05-08
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p>在类Unix系统中可以使用top查看系统资源、进程、内存占用等信息。查看网络状态可以使用netstat、nmap等工具。若要查看实时的网络流量，监控TCP/IP连接等，则可以使用iftop。</p>
<p><strong>一、iftop是什么？</strong></p>
<p>iftop是类似于top的实时流量监控工具。<br>官方网站：<a href="http://www.ex-parrot.com/~pdw/iftop/" target="_blank" rel="noopener">http://www.ex-parrot.com/~pdw/iftop/</a></p>
<p><strong>二、iftop有什么用？</strong></p>
<p>iftop可以用来监控网卡的实时流量（可以指定网段）、反向解析IP、显示端口信息等，详细的将会在后面的使用参数中说明。</p>
<p><strong>三、安装iftop</strong></p>
<p><strong><strong>安装方法1、**</strong></strong>编译安装**</p>
<p>如果采用编译安装可以到<a href="http://www.ex-parrot.com/~pdw/iftop/" target="_blank" rel="noopener">iftop官网</a>下载最新的源码包。<br>安装前需要已经安装好基本的编译所需的环境，比如make、gcc、autoconf等。安装iftop还需要安装libpcap和libcurses。<br><strong>CentOS上安装所需依赖包：</strong><br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install flex byacc libpcap ncurses ncurses-devel libpcap-devel</span><br></pre></td></tr></table></figure></p>
<p><strong>Debian上安装所需依赖包：</strong><br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install flex byacc libpcap0.8 libncurses5</span><br></pre></td></tr></table></figure></p>
<p>下载iftop<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">wget http://www.ex-parrot.com/pdw/iftop/download/iftop-0.17.tar.gz</span><br><span class="line">tar zxvf iftop-0.17.tar.gz</span><br><span class="line">cd iftop-0.17</span><br><span class="line">./configure</span><br><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure></p>
<p><strong>安装方法2：(懒人办法，最简单)</strong></p>
<p>直接省略上面的步骤<br>CentOS系统：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">yum install flex byacc libpcap ncurses ncurses-devel</span><br><span class="line">wget ftp://fr2.rpmfind.net/linux/dag/redhat/el5/en/i386/dag/RPMS/iftop-0.17-1.el5.rf.i386.rpm</span><br><span class="line">rpm -ivh iftop-0.17-1.el5.rf.i386.rpm</span><br></pre></td></tr></table></figure></p>
<p>Debian系统 运行：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install iftop</span><br></pre></td></tr></table></figure></p>
<p><strong>四、运行iftop</strong></p>
<p>直接运行： iftop<br>效果如下图：</p>
<p><a href="/uploads/2013/05/20140112212729.jpg"><img src="/uploads/2013/05/20140112212729.jpg" alt="20140112212729"></a></p>
<p><strong>五、相关参数及说明</strong></p>
<p><strong>1、iftop界面相关说明</strong></p>
<p>界面上面显示的是类似刻度尺的刻度范围，为显示流量图形的长条作标尺用的。<br>中间的&lt;_ _=”_”&gt;这两个左右箭头，表示的是流量的方向。<br> TX：发送流量<br> RX：接收流量<br> TOTAL：总流量<br> Cumm：运行iftop到目前时间的总流量<br> peak：流量峰值<br> rates：分别表示过去 2s 10s 40s 的平均流量</p>
<h3 id="2、iftop相关参数"><a href="#2、iftop相关参数" class="headerlink" title="2、iftop相关参数"></a>2、iftop相关参数</h3><h3 id="常用的参数"><a href="#常用的参数" class="headerlink" title="常用的参数"></a>常用的参数</h3><p> -i设定监测的网卡，如：# iftop -i eth1<br> -B 以bytes为单位显示流量(默认是bits)，如：# iftop -B<br> -n使host信息默认直接都显示IP，如：# iftop -n<br> -N使端口信息默认直接都显示端口号，如: # iftop -N<br> -F显示特定网段的进出流量，如# iftop -F 10.10.1.0/24或# iftop -F 10.10.1.0/255.255.255.0<br> -h（display this message），帮助，显示参数信息<br> -p使用这个参数后，中间的列表显示的本地主机信息，出现了本机以外的IP信息;<br> -b使流量图形条默认就显示;<br> -f这个暂时还不太会用，过滤计算包用的;<br> -P使host信息及端口信息默认就都显示;<br> -m设置界面最上边的刻度的最大值，刻度分五个大段显示，例：# iftop -m 100M</p>
<h3 id="进入iftop画面后的一些操作命令-注意大小写"><a href="#进入iftop画面后的一些操作命令-注意大小写" class="headerlink" title="进入iftop画面后的一些操作命令(注意大小写)"></a>进入iftop画面后的一些操作命令(注意大小写)</h3><p> 按h切换是否显示帮助;<br> 按n切换显示本机的IP或主机名;<br> 按s切换是否显示本机的host信息;<br> 按d切换是否显示远端目标主机的host信息;<br> 按t切换显示格式为2行/1行/只显示发送流量/只显示接收流量;<br> 按N切换显示端口号或端口服务名称;<br> 按S切换是否显示本机的端口信息;<br> 按D切换是否显示远端目标主机的端口信息;<br> 按p切换是否显示端口信息;<br> 按P切换暂停/继续显示;<br> 按b切换是否显示平均流量图形条;<br> 按B切换计算2秒或10秒或40秒内的平均流量;<br> 按T切换是否显示每个连接的总流量;<br> 按l打开屏幕过滤功能，输入要过滤的字符，比如ip,按回车后，屏幕就只显示这个IP相关的流量信息;<br> 按L切换显示画面上边的刻度;刻度不同，流量图形条会有变化;<br> 按j或按k可以向上或向下滚动屏幕显示的连接记录;<br> 按1或2或3可以根据右侧显示的三列流量数据进行排序;<br> 按&lt;根据左边的本机名或IP排序br&gt; 按&gt;根据远端目标主机的主机名或IP排序;<br> 按o切换是否固定只显示当前的连接;<br> 按f可以编辑过滤代码，这是翻译过来的说法，我还没用过这个！<br> 按!可以使用shell命令，这个没用过！没搞明白啥命令在这好用呢！<br> 按q退出监控。</p>
<h2 id="六、常见问题"><a href="#六、常见问题" class="headerlink" title="六、常见问题"></a>六、常见问题</h2><p> 1、make: yacc: Command not found<br> make: *** [grammar.c] Error 127<br> 解决方法：apt-get install byacc / yum install byacc<br> 2、configure: error: Curses! Foiled again!<br> (Can’t find a curses library supporting mvchgat.)<br> Consider installing ncurses.<br> 解决方法：apt-get install libncurses5-dev /  yum install ncurses-devel</p>
<p>转载自 <a href="http://www.vpser.net/manage/iftop.html" target="_blank" rel="noopener">http://www.vpser.net/manage/iftop.html</a></p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/VPS-技术/">VPS 技术</a>
    </span>
    

    

    </div>

    
    <div class="article-meta pull-right">
      <span>
        <i class="icon-comments"></i>
        <span>
          <a href="/2013/05/08/Linux流量监控工具 - iftop (最全面的iftop教程)(转载)/#comment">评论</a>
        </span>
      </span>
    </div>
    
  </div>
</article>



  <article>

  
    
    <h3 class="article-title"><a href="/2013/05/07/PHP利用curl伪造IP和来路(转载)/"><span>PHP利用curl伪造IP和来路(转载)</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2013/05/07/PHP利用curl伪造IP和来路(转载)/" rel="bookmark">
        <time class="entry-date published" datetime="2013-05-07T05:02:29.000Z">
          2013-05-07
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p><a href="/uploads/2013/05/20120101065534935.jpg"><img src="/uploads/2013/05/20120101065534935-300x93.jpg" alt="20120101065534935"></a><br>效果如图<br>伪造的文件：1.php<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$ch = curl_init();</span><br><span class="line">curl_setopt($ch, CURLOPT_URL, &quot;http://localhost/2.php&quot;);</span><br><span class="line">curl_setopt($ch, CURLOPT_HTTPHEADER, array(&apos;X-FORWARDED-FOR:8.8.8.8&apos;, &apos;CLIENT-IP:8.8.8.8&apos;));  //构造IP</span><br><span class="line">curl_setopt($ch, CURLOPT_REFERER, &quot;http://www.xssxss.com/ &quot;);   //构造来路</span><br><span class="line">curl_setopt($ch, CURLOPT_HEADER, 1);</span><br><span class="line">$out = curl_exec($ch);</span><br><span class="line">curl_close($ch);</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure></p>
<p>查看效果的脚本2.php<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">function getClientIp() &#123;</span><br><span class="line">    if (!empty($_SERVER[&quot;HTTP_CLIENT_IP&quot;]))</span><br><span class="line">        $ip = $_SERVER[&quot;HTTP_CLIENT_IP&quot;];</span><br><span class="line">    else if (!empty($_SERVER[&quot;HTTP_X_FORWARDED_FOR&quot;]))</span><br><span class="line">        $ip = $_SERVER[&quot;HTTP_X_FORWARDED_FOR&quot;];</span><br><span class="line">    else if (!empty($_SERVER[&quot;REMOTE_ADDR&quot;]))</span><br><span class="line">        $ip = $_SERVER[&quot;REMOTE_ADDR&quot;];</span><br><span class="line">    else</span><br><span class="line">        $ip = &quot;err&quot;;</span><br><span class="line">    return $ip;</span><br><span class="line">&#125;</span><br><span class="line">echo &quot;IP: &quot; . getClientIp() . &quot;&quot;;</span><br><span class="line">echo &quot;referer: &quot; . $_SERVER[&quot;HTTP_REFERER&quot;];</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure></p>
<p> 原文链接：<a href="http://www.2cto.com/kf/201201/115774.html" target="_blank" rel="noopener">http://www.2cto.com/kf/201201/115774.html</a></p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/Web-开发/">Web 开发</a>
    </span>
    

    

    </div>

    
    <div class="article-meta pull-right">
      <span>
        <i class="icon-comments"></i>
        <span>
          <a href="/2013/05/07/PHP利用curl伪造IP和来路(转载)/#comment">评论</a>
        </span>
      </span>
    </div>
    
  </div>
</article>



  <article>

  
    
    <h3 class="article-title"><a href="/2013/05/07/FBI密码挑战，你能解开吗？/"><span>FBI密码挑战，你能解开吗？</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2013/05/07/FBI密码挑战，你能解开吗？/" rel="bookmark">
        <time class="entry-date published" datetime="2013-05-07T03:29:03.000Z">
          2013-05-07
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p>时间：2013-05-06 15:00 作者：夏梦竹<br>最近几年，FBI官网都会推出一个新的密码破解挑战赛，据说是为了激发青少年对FBI工作的好奇心而设立。与以往不同的是，这次加入了代码。下面的这幅图就是今年的密码破译游戏，一起看看你能破解吗？</p>
<p><a href="/uploads/2013/05/wpid-5187545894947.jpg"><img src="/uploads/2013/05/wpid-5187545894947.jpg" alt="image"></a></p>
<p>你能破解吗？<br>尽管破解了FBI也不会聘你做探员，但至少可以显摆一下各位精湛的大脑，不管怎样，大家试试吧。<br>想要了解更多关于恐怖分子、间谍和不法分子利用他们的通信类型密码和代码吗？请参阅“Analysis of Criminal Codes and Ciphers”，你也可以查看以往著名案件的”密码破解“法：A 400-Year History。<br>一起来回顾下过去精彩的密码破解案例：</p>
<p><a href="/uploads/2013/05/wpid-518755436a64a.jpg"><img src="/uploads/2013/05/wpid-518755436a64a.jpg" alt="image"></a></p>
<p><a href="/uploads/2013/05/wpid-518755d4ba70e.jpg"><img src="/uploads/2013/05/wpid-518755d4ba70e.jpg" alt="image"></a></p>
<p><a href="http://www.fbi.gov/news/stories/2009/december/code_122409" target="_blank" rel="noopener">December 2009</a><br><a href="http://www.fbi.gov/news/stories/2009/may/code_052309" target="_blank" rel="noopener">May 2009</a></p>
<p><a href="/uploads/2013/05/wpid-5187557d692a5.jpg"><img src="/uploads/2013/05/wpid-5187557d692a5.jpg" alt="image"></a></p>
<p><a href="/uploads/2013/05/wpid-518755960a57b.jpg"><img src="/uploads/2013/05/wpid-518755960a57b.jpg" alt="image"></a></p>
<p><a href="http://www.fbi.gov/news/stories/2008/december/code_122908" target="_blank" rel="noopener">December 2008</a><br><a href="http://www.fbi.gov/news/stories/2007/november/code112107" target="_blank" rel="noopener">November 2007</a></p>
<p>在笔者看来还是蛮难的，反正我是看不懂，谁有本事来破解一下？如果你实在想不出答案，也没关系，笔者稍后会公布答案！</p>
<p>P.S. 本文转载，原文如此，我不是笔者。。。别问我答案。。。</p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/奇闻异事/">奇闻异事</a>
    </span>
    

    

    </div>

    
    <div class="article-meta pull-right">
      <span>
        <i class="icon-comments"></i>
        <span>
          <a href="/2013/05/07/FBI密码挑战，你能解开吗？/#comment">评论</a>
        </span>
      </span>
    </div>
    
  </div>
</article>



  <article>

  
    
    <h3 class="article-title"><a href="/2013/05/06/PHP 爱好者留言板 for BAE/"><span>PHP 爱好者留言板 for BAE</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2013/05/06/PHP 爱好者留言板 for BAE/" rel="bookmark">
        <time class="entry-date published" datetime="2013-05-05T18:08:25.000Z">
          2013-05-06
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p>使用说明：</p>
<ol>
<li>修改本目录中的 config.php 内的数据库名</li>
<li>将其打包入 wwwroot.zip 中的 include 目录，覆盖原文件</li>
<li>上传 wwwroot.zip 解包</li>
<li>修改数据库编码为 GBK</li>
<li>将 sql.sql 导入数据库</li>
<li>使用默认用户名密码登陆后台修改设置</li>
</ol>
<p>注：</p>
<ol>
<li>默认管理员用户 admin</li>
<li>默认管理员用户密码 123456</li>
<li>如需使用留言发信通知，请修改后台的 BCMS Queue 设置</li>
<li>原作者：PHPfans <a href="http://www.phpfans.net/" target="_blank" rel="noopener">http://www.phpfans.net/</a></li>
<li>修改者：<a href="http://futa.ooo">http://futa.ooo</a> 联系方式：QQ：<a href="mailto:admin@imjs.work" target="_blank" rel="noopener">admin@imjs.work</a></li>
<li>演示站：<a href="http://sxbxjhwm.duapp.com" target="_blank" rel="noopener">http://sxbxjhwm.duapp.com</a> 或者 <a href="http://ly.imjs.work" target="_blank" rel="noopener">http://ly.imjs.work</a></li>
<li>您可以自行定制 UEditor 编辑器，不过请注意本程序是 GBK 编码，需要转码后才能使用</li>
<li>UEditor 官网：<a href="http://ueditor.baidu.com" target="_blank" rel="noopener">http://ueditor.baidu.com</a></li>
</ol>
<p>下载地址：<a href="http://pan.baidu.com/share/link?shareid=502967&amp;uk=3725396711" target="_blank" rel="noopener">http://pan.baidu.com/share/link?shareid=502967&uk;=3725396711</a></p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/程序发布/">程序发布</a>
    </span>
    

    

    </div>

    
    <div class="article-meta pull-right">
      <span>
        <i class="icon-comments"></i>
        <span>
          <a href="/2013/05/06/PHP 爱好者留言板 for BAE/#comment">评论</a>
        </span>
      </span>
    </div>
    
  </div>
</article>



  <article>

  
    
    <h3 class="article-title"><a href="/2013/05/02/Bandwagon 便宜 VPS/"><span>Bandwagon 便宜 VPS</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2013/05/02/Bandwagon 便宜 VPS/" rel="bookmark">
        <time class="entry-date published" datetime="2013-05-02T05:15:01.000Z">
          2013-05-02
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p>一年只要 $9.99，只不过是 OpenVZ，建议建站，不过不抗 ddos，自行准备好 cdn，只支持 PayPal 付款，有需要的可以找我代购，收 70，赚点零花钱嘛你懂的</p>
<p>具体配置：<br>Unmanaged service<br>HDD: 5 GB RAID-10<br>RAM: 512 MB<br>SWAP: 512 MB<br>CPU: 1x Intel Xeon E5620<br>BW: 500 GB/mo<br>Link speed: 1 Gigabit<br>Location: US, Arizona</p>
<p>VPS technology: OpenVZ/KiwiVM<br>Linux OS: 32-bit and 64-bit Centos, Debian, Ubuntu, Fedora<br>Instant OS reload<br>1 Dedicated IPv4 address<br>Full root access<br>PPP and VPN support (tun/tap)<br>Instant RDNS update from control panel<br>No contract, anytime cancellation<br>Strictly unmanaged, no support<br>99% uptime guarantee<br>30-day money back guarantee</p>
<p>idc 承诺 30 天无条件退款这点让我挺意外的<br>购买链接：<a href="https://bandwagonhost.com/aff.php?aff=561&amp;pid=22" target="_blank" rel="noopener">https://bandwagonhost.com/aff.php?aff=561&pid;=22</a></p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/建站相关/">建站相关</a>
    </span>
    

    

    </div>

    
    <div class="article-meta pull-right">
      <span>
        <i class="icon-comments"></i>
        <span>
          <a href="/2013/05/02/Bandwagon 便宜 VPS/#comment">评论</a>
        </span>
      </span>
    </div>
    
  </div>
</article>



  <article>

  
    
    <h3 class="article-title"><a href="/2013/05/01/本博客新增加“历史上的今天”小工具栏/"><span>本博客新增加“历史上的今天”小工具栏</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2013/05/01/本博客新增加“历史上的今天”小工具栏/" rel="bookmark">
        <time class="entry-date published" datetime="2013-05-01T05:58:34.000Z">
          2013-05-01
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p>效果肿么样亲们 :)</p>
<p>源码：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span></span><br><span class="line"><span class="php">	header(<span class="string">"Content-type: text/html; charset=utf-8"</span>);</span></span><br><span class="line"><span class="php">	<span class="function"><span class="keyword">function</span> <span class="title">html_get_contents</span><span class="params">($url)</span> </span>&#123;</span></span><br><span class="line"><span class="php">		$ch = curl_init();</span></span><br><span class="line"><span class="php">		curl_setopt($ch, CURLOPT_URL, $url);</span></span><br><span class="line"><span class="php">		curl_setopt($ch, CURLOPT_RETURNTRANSFER, <span class="number">1</span>);</span></span><br><span class="line"><span class="php">		curl_setopt($ch, CURLOPT_HEADER, <span class="number">0</span>);</span></span><br><span class="line"><span class="php">		curl_setopt($ch, CURLOPT_TIMEOUT, <span class="number">5</span>);</span></span><br><span class="line"><span class="php">		$output = curl_exec($ch);</span></span><br><span class="line"><span class="php">		curl_close($ch);</span></span><br><span class="line"><span class="php">		<span class="keyword">if</span> ($output===<span class="keyword">false</span>) &#123;</span></span><br><span class="line"><span class="php">			<span class="keyword">return</span> <span class="keyword">false</span>;</span></span><br><span class="line"><span class="php">		&#125;</span></span><br><span class="line"><span class="php">		<span class="keyword">return</span> $output;</span></span><br><span class="line"><span class="php">	&#125;</span></span><br><span class="line"><span class="php">	$wiki=html_get_contents(<span class="string">'http://zh.m.wikipedia.org/zh-cn/Wikipedia:%E9%A6%96%E9%A1%B5'</span>);</span></span><br><span class="line"><span class="php">	<span class="keyword">if</span> ($wiki===<span class="keyword">false</span>) &#123;</span></span><br><span class="line"><span class="php">      <span class="keyword">echo</span> <span class="string">&lt;&lt;&lt;eof</span></span></span><br><span class="line"><span class="php">&lt;p&gt;无法获取维基百科页面，请 &lt;a href=<span class="string">"#php_widget-2"</span> id=<span class="string">"reloadwiki"</span>&gt;刷新&lt;/a&gt; 重试&lt;/p&gt;</span></span><br><span class="line"><span class="php">&lt;script type=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="php">$(<span class="string">"#reloadwiki"</span>).click( <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>&#123;</span></span><br><span class="line"><span class="php">$(<span class="string">"#wikipedia"</span>).html(<span class="string">"正在刷新，请稍候"</span>);</span></span><br><span class="line"><span class="php">$.get(<span class="string">"/wiki.php"</span>,<span class="function"><span class="keyword">function</span><span class="params">(wiki)</span> </span>&#123;</span></span><br><span class="line"><span class="php">$(<span class="string">"#wikipedia"</span>).html(wiki);</span></span><br><span class="line"><span class="php">&#125;);</span></span><br><span class="line"><span class="php">&#125;);</span></span><br><span class="line"><span class="php">&lt;/script&gt;</span></span><br><span class="line"><span class="php">eof;</span></span><br><span class="line"><span class="php">      <span class="keyword">exit</span>();</span></span><br><span class="line"><span class="php">	&#125;</span></span><br><span class="line"><span class="php">	preg_match_all(<span class="string">"/历史上的今天&lt;\/span&gt;&lt;\/h2&gt;(.*?)更多历史事件&lt;\/a&gt;&lt;\/li&gt;\n&lt;\/ul&gt;/isu"</span>,$wiki,$output);</span></span><br><span class="line"><span class="php"><span class="keyword">echo</span> str_replace(<span class="keyword">array</span>(<span class="string">'&lt;dl&gt;'</span>,<span class="string">'&lt;/dl&gt;'</span>,<span class="string">'&lt;dt&gt;'</span>,<span class="string">'&lt;/dt&gt;'</span>,<span class="string">'&lt;dd&gt;'</span>,<span class="string">'&lt;/dd&gt;'</span>,<span class="string">'src="//'</span>),<span class="keyword">array</span>(<span class="string">'&lt;p&gt;'</span>,<span class="string">'&lt;/p&gt;'</span>,<span class="string">'&lt;b&gt;'</span>,<span class="string">'&lt;/b&gt;'</span>,<span class="string">'&lt;br /&gt;'</span>,<span class="string">'&lt;br /&gt;'</span>,<span class="string">'src="http://'</span>),preg_replace(<span class="string">"/( class=\".*?\"|&lt;span(.*?)&gt;|&lt;div(.*?)&gt;|&lt;\/div&gt;|历史上的今天&lt;\/span&gt;&lt;\/h2&gt;)/"</span>,<span class="string">''</span>,preg_replace(<span class="string">'/href="\/wiki\/(.*?)"/isu'</span>,<span class="string">'href="http://zh.wikipedia.org/wiki/\\1" target="_blank" nofollow="nofollow"'</span>,$output[<span class="number">0</span>][<span class="number">0</span>])));</span></span><br><span class="line"><span class="php"><span class="meta">?&gt;</span></span></span><br></pre></td></tr></table></figure></p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/程序发布/">程序发布</a>
    </span>
    

    

    </div>

    
    <div class="article-meta pull-right">
      <span>
        <i class="icon-comments"></i>
        <span>
          <a href="/2013/05/01/本博客新增加“历史上的今天”小工具栏/#comment">评论</a>
        </span>
      </span>
    </div>
    
  </div>
</article>



  <article>

  
    
    <h3 class="article-title"><a href="/2013/04/28/简单解决网站中无法使用SMTP发送邮件的问题(转载)/"><span>简单解决网站中无法使用SMTP发送邮件的问题(转载)</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2013/04/28/简单解决网站中无法使用SMTP发送邮件的问题(转载)/" rel="bookmark">
        <time class="entry-date published" datetime="2013-04-28T00:05:46.000Z">
          2013-04-28
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p>有许多的虚拟主机都禁止了 MAIL 函数，当然、也是因为防止垃圾邮件的诞生，但是也影响了一部分客户</p>
<p><a href="/uploads/2013/04/wpid-20130427131924727.jpg"><img src="/uploads/2013/04/wpid-20130427131924727.jpg" alt="image"></a></p>
<p>许多的用户就会选择使用 SMTP 来发送邮件，但是有些主机看着探针支持 SMTP 但是却无法发邮件是啥回事？今天我就来说说几种解决方式吧，如果遇见了错误但不懂如何解决的请看！（以Wordpress示范）</p>
<p>一、修改发信端口</p>
<p>这个是最低级的一个错误之一，就是端口错误。很多人喜欢乱写，但是常用的有 25、465、587 等。</p>
<p>如果使用常用无 SSL 发信端口没有用的话，就用 SSL 的！例如 465 这样（许多邮箱的端口不同）的端口。</p>
<p>二、替换发信函数</p>
<p>正常情况下 SMTP 都是使用 fsockopen 函数来发信的，当然、如果禁用了我们还可以用其他的！</p>
<ol>
<li>替换为 pfsockopen 函数：</li>
</ol>
<p>在 “wp-includes” 下找到 “class-smtp.php” 并搜索 “fsockopen” 大约会得出以下结果：</p>
<p><a href="/uploads/2013/04/wpid-20130427132725598.jpg"><img src="/uploads/2013/04/wpid-20130427132725598.jpg" alt="image"></a></p>
<p>在前面加一个 “p” 就可以了，最好是小写。然后保存上传，如果无误的话、你的网站已经可以发信了。</p>
<ol start="2">
<li>使用 stream_socket_client 函数：</li>
</ol>
<p>同样是找到 “class-smtp.php” 并搜索 “fsockopen”，替换如下代码：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@fsockopen($host,</span><br></pre></td></tr></table></figure>
<p>把上面的代码替换成：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@stream_socket_client($host.<span class="string">":"</span>.$port,</span><br></pre></td></tr></table></figure>
<p>如果不是很懂的话，请看图：</p>
<p><a href="/uploads/2013/04/wpid-2013042713330981.jpg"><img src="/uploads/2013/04/wpid-2013042713330981.jpg" alt="image"></a></p>
<p>如果第一种方法不行，这种方法一般都是不行的了 …… 不要沮丧，有高手还自定义函数的、我就不介绍了</p>
<p>三、使用一些神奇的插件</p>
<p>这个可能性就非常的小啦，不过先前看到有一个人发布的一个插件、可以支持任意主机发信。具体的可能是本地收取了发信内容之后：传送到发信平台（私人或公有的发信服务器、类似百度 BCMS 这种），然后同意进行传送。</p>
<p>我没有多余的服务器，我也就不搞这些事情了。有时间的话我会去做一个 BCMS 的插件如何呢？</p>
<p>原文链接：<a href="http://www.zntec.cn/archives/smtp-error.html" target="_blank" rel="noopener">http://www.zntec.cn/archives/smtp-error.html</a></p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/建站相关/">建站相关</a>
    </span>
    

    

    </div>

    
    <div class="article-meta pull-right">
      <span>
        <i class="icon-comments"></i>
        <span>
          <a href="/2013/04/28/简单解决网站中无法使用SMTP发送邮件的问题(转载)/#comment">评论</a>
        </span>
      </span>
    </div>
    
  </div>
</article>



  <article>

  
    
    <h3 class="article-title"><a href="/2013/04/26/推荐个挺便宜的虚拟主机/"><span>推荐个挺便宜的虚拟主机</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2013/04/26/推荐个挺便宜的虚拟主机/" rel="bookmark">
        <time class="entry-date published" datetime="2013-04-26T05:52:41.000Z">
          2013-04-26
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p>博客型主机只需要 48 RMB/年，表示不是很贵。同时为了保证客户安全，这家 IDC 把服务器分成了 20 个 VPS，每个 VPS 装 10 个客户，如果 VPS 被攻击，不会导致服务器被攻击。</p>
<p>具体配置：<br>512 MB 磁盘<br>10 个 数据库<br>15 GB 月流量<br>10 个 绑定域<br>25 个 子域名<br>全站 数据备份<br>Linux<br>免费指导<br>24小时全额退款<br>DirectAdmin 控制面板<br>洛杉矶Multacom机房</p>
<p>链接：<a href="http://idc.geassgr.net/" target="_blank" rel="noopener">http://idc.geassgr.net/</a><br>测试站点：<a href="http://20264.com/" target="_blank" rel="noopener">http://20264.com/</a></p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/建站相关/">建站相关</a>
    </span>
    

    

    </div>

    
    <div class="article-meta pull-right">
      <span>
        <i class="icon-comments"></i>
        <span>
          <a href="/2013/04/26/推荐个挺便宜的虚拟主机/#comment">评论</a>
        </span>
      </span>
    </div>
    
  </div>
</article>



  <article>

  
    
    <h3 class="article-title"><a href="/2013/04/26/MYSQL 批量替换文章中的url地址/"><span>MYSQL 批量替换文章中的url地址</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2013/04/26/MYSQL 批量替换文章中的url地址/" rel="bookmark">
        <time class="entry-date published" datetime="2013-04-26T04:08:40.000Z">
          2013-04-26
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p>博客建立初期，因为使用了免费域名，所以文章中上传的图片地址都用了这个域名，导致现在含有这些图片的文章在显示中受到了影响，域名现在已经不再属于我，所以使用 MYSQL 去批量替换掉那些带有旧域名的图片地址被摆上了日程。</p>
<p>MYSQL 替换语句 UPDATE<br>UPDATE 是 MYSQL 的替换语句，英文直译是更新。</p>
<p>UPDATE 语句使用</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> 表名 <span class="keyword">SET</span> 字段 = <span class="keyword">REPLACE</span>(字段,<span class="string">'待替换内容'</span>,<span class="string">'替换值'</span>);</span><br></pre></td></tr></table></figure>
<p>表明和字段名都不需要引号，只是在待替换内容和替换值上是需要引号的，因为他们是字符串类型的，这里要注意下。</p>
<p>操作步骤：</p>
<ol>
<li>备份数据库</li>
</ol>
<p>不论你要对你的数据进行何种形式的操作，第一条建议就是备份。</p>
<ol start="2">
<li><p>进入空间上提供的 PHPMYADMIN 面板。<br>这玩意现在的空间上大都给提供，你可以使劲找找，这里要提示一下的是，有的空间上给的面板是分字符编码的，WordPress 的朋友注意使用UTF-8的。</p>
</li>
<li><p>文章内容的位置<br>WordPress 中的文章被放置在 post 表中的 post_content 字段中。</p>
</li>
<li><p>点选 SQL，在语句执行框中输入你刚才学到的 UPDATE 语句，<br>当然这要配合你自己的数据表名、数据库名、替换规则等，<br>我的很简单，像如下那样：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> wp_posts <span class="keyword">SET</span> post_content = <span class="keyword">REPLACE</span>( post_content, <span class="string">'xn--1jv01l0h.tk'</span>, <span class="string">'233.imjs.work'</span> );</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>执行结束后会有替换数量和时间的提示。<br>点击执行，就大功告成了。</p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/建站相关/">建站相关</a>
    </span>
    

    

    </div>

    
    <div class="article-meta pull-right">
      <span>
        <i class="icon-comments"></i>
        <span>
          <a href="/2013/04/26/MYSQL 批量替换文章中的url地址/#comment">评论</a>
        </span>
      </span>
    </div>
    
  </div>
</article>



  <article>

  
    
    <h3 class="article-title"><a href="/2013/04/26/BargainVM 几乎免费的VPS 256M-2f-10G-2f-100G/"><span>BargainVM 几乎免费的VPS 256M/10G/100G</span></a></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2013/04/26/BargainVM 几乎免费的VPS 256M-2f-10G-2f-100G/" rel="bookmark">
        <time class="entry-date published" datetime="2013-04-26T00:57:42.000Z">
          2013-04-26
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p>BargainVM是2012年注册的空间商，是renderhosting.net旗下的站点，现在有一个免费vps试用的计划(原价3.95/月)，只收2元设置费，如果使用优惠码的话只要一元，支持信用卡付款。据很多人说续费是0元，意思相当于永久免费，但是官方没有明确说明永久免费。<br>网上也看到有人说这VPS偶尔挂掉的，不知道具体情况，大家有兴趣的可以去测试一下。</p>
<p><a href="/uploads/2013/04/wpid-vps.jpg"><img src="/uploads/2013/04/wpid-vps.jpg" alt="image"></a></p>
<p>说一下这款特价优惠VPS的具体规格：<br>XEN架构<br>256MB Memory<br>10GB HD<br>100GB Bandwidth<br>1 IP Address</p>
<p>优惠码： WSO<br>购买链接：<a href="http://www.bargainvm.com/warrior.html" target="_blank" rel="noopener">http://www.bargainvm.com/warrior.html</a></p>
<p>P.S. 仅供测试，请勿建站，不稳定</p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/免费-VPS/">免费 VPS</a>
    </span>
    

    

    </div>

    
    <div class="article-meta pull-right">
      <span>
        <i class="icon-comments"></i>
        <span>
          <a href="/2013/04/26/BargainVM 几乎免费的VPS 256M-2f-10G-2f-100G/#comment">评论</a>
        </span>
      </span>
    </div>
    
  </div>
</article>




<nav class="pagination">
  
  <a href="/page/27/" class="pagination-prev">上一页</a>
  
  
  <a href="/page/29/" class="pagination-next">下一页</a>
  
</nav>
    </main>

    <footer class="site-footer">
  <p class="site-info">
    Proudly powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and
    Theme by <a href="https://github.com/CodeDaraW/Hacker" target="_blank">Hacker</a>
    </br>
    
    &copy; 2018 403 Forbidden
    
  </p>
</footer>
    
  </div>
</div>
</body>
</html>