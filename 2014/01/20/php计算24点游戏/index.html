<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>php计算24点游戏 | 博客</title>

  
  <meta name="author" content="403 Forbidden">
  

  
  <meta name="description" content="修改了下，加了个表单。原文转载自 http://www.alixixi.com/program/a/2008050731708.shtml`&amp;lt;?phpset_time_limit(0);?&amp;gt;
                                                ">
  

  
  
  <meta name="keywords" content="">
  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <meta property="og:title" content="php计算24点游戏"/>

  <meta property="og:site_name" content="博客"/>

  
  <meta property="og:image" content="/favicon.ico"/>
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="博客" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
</head>


<body>
<div class="blog">
  <div class="content">

    <header>
  <div class="site-branding">
    <h1 class="site-title">
      <a href="/">博客</a>
    </h1>
    <p class="site-description"></p>
  </div>
  <nav class="site-navigation">
    <ul>
      
        <li><a href="/">主页</a></li>
      
        <li><a href="/archives">归档</a></li>
      
    </ul>
  </nav>
</header>

    <main class="site-main posts-loop">
    <article>

  
    
    <h3 class="article-title"><span>php计算24点游戏</span></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/2014/01/20/php计算24点游戏/" rel="bookmark">
        <time class="entry-date published" datetime="2014-01-19T19:42:43.000Z">
          2014-01-20
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p>修改了下，加了个表单。原文转载自 <a href="http://www.alixixi.com/program/a/2008050731708.shtml" target="_blank" rel="noopener">http://www.alixixi.com/program/a/2008050731708.shtml</a><br>`&lt;?php<br>set_time_limit(0);<br>?&gt;</p>
<p><html><br>    <head><br>        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><br>        <meta http-equiv="pragram" content="no-cache"><br>        <meta http-equiv="cache-control" content="no-cache, must-revalidate"><br>        <meta http-equiv="expires" content="0"><br>        <meta http-equiv="Content-Type" content="text/HTML; charset=utf-8"><br>        <title>24 点计算器</title><br>    </head><br>    <body><br>&lt;?php<br>$values = explode(‘ ‘,$_POST[‘num’]);<br>$result = 24;</body></html></p>
<p>$list = array();</p>
<p>if ($_POST) {<br>makeValue($values);<br>echo ‘<pre>‘;<br>print_r($list);<br>echo ‘</pre>‘;<br>}</p>
<p>function makeValue($values, $set=array())<br>{<br>    $words = array(“+”, “-“, “*”, “/“);<br>    if(sizeof($values)==1)<br>    {<br>        $set[] = array_shift($values);<br>        return makeSpecial($set);<br>    } </p>
<pre><code>foreach($values as $key=&gt;$value) 
{ 
    $tmpValues = $values; 
    unset($tmpValues[$key]); 
    foreach($words as $word) 
    { 
        makeValue($tmpValues, array_merge($set, array($value, $word))); 
    } 
} 
</code></pre><p>} </p>
<p>function makeSpecial($set)<br>{<br>    $size = sizeof($set);</p>
<pre><code>if($size&lt;=3 || !in_array(&quot;/&quot;, $set) &amp;&amp; !in_array(&quot;*&quot;, $set)) 
{ 
    return makeResult($set); 
}

for($len=3; $len&lt;$size-1; $len+=2) 
{ 
    for($start=0; $start&lt;$size-1; $start+=2) 
    { 
        if(!($set[$start-1]==&quot;*&quot; || $set[$start-1]==&quot;/&quot; || $set[$start+$len]==&quot;*&quot; || $set[$start+$len]==&quot;/&quot;)) 
            continue; 
        $subSet = array_slice($set, $start, $len); 
        if(!in_array(&quot;+&quot;, $subSet) &amp;&amp; !in_array(&quot;-&quot;, $subSet)) 
            continue; 
        $tmpSet = $set; 
        array_splice($tmpSet, $start, $len-1); 
        $tmpSet[$start] = &quot;(&quot;.implode(&quot;&quot;, $subSet).&quot;)&quot;; 
        makeSpecial($tmpSet); 
    } 
} 
</code></pre><p>}</p>
<p>function makeResult($set)<br>{<br>    global $result, $list;<br>    $str = implode(“”, $set);<br>    @eval(“\$num=$str;”);<br>    if($num==$result &amp;&amp; !in_array($str, $list))<br>    $list[] = $str;<br>}</p>
<p>?&gt;<br>    <center><br>            <form action="" method="post"><br>                <p><label>请输入四个数字，空格分割：<br><input type="text" name="num"></label></p><br>                <p><input type="submit" name="submit" value="提交"></p><br>            </form><br>        </center><br>    <br><br><code>`</code></p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/Web-开发/">Web 开发</a>
    </span>
    

    

    </div>

    
  </div>
</article>


    </main>

    <footer class="site-footer">
  <p class="site-info">
    Proudly powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and
    Theme by <a href="https://github.com/CodeDaraW/Hacker" target="_blank">Hacker</a>
    </br>
    
    &copy; 2018 403 Forbidden
    
  </p>
</footer>
    
  </div>
</div>
</body>
</html>